function Property(a,b,c,d){this.uniqueId=++Property.uniqueId,this.isAlreadyComputed=!1,this.ctx=a,this.propName=b,this.value=c;var e=this;Object.defineProperty(a,b,{get:function(){return!e.isAlreadyComputed&&Property.isComputing&&e.compute(),d.get.call(a)},set:function(b){d.set.call(a,b)}}),this.compute=function(){if(!e.isAlreadyComputed){var c=e.value;e.value=d.compute.call(a),"undefined"!=typeof Property.postComputeHooks[e.propName]&&(e.value=Property.postComputeHooks[e.propName].call(a,e.value)),"undefined"!=typeof Property.postComputeHooks["all"]&&(e.value=Property.postComputeHooks["all"].call(a,e.value,e.propName)),a[b]=e.value,e.isAlreadyComputed=!0,Property.alreadyComputed.push(e),e.updateDom(c)}},this.updateDom=function(b){var c=!isNaN(e.value),f="[object String]"===Object.prototype.toString.call(e.value);c?Math.abs(b-e.value)>=.001&&d.updateDom.call(a):f&&b!==e.value&&d.updateDom.call(a)}}function onload_editor(){var a={lines:9,length:12,width:6,radius:12,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},b=document.getElementById("loadingMessage");spinner=new Spinner(a).spin(b)}var eqEd,getInternetExplorerVersion,getChromeVersion,ChromeVersion,IEVersion,clearHighlighted,randomIntFromInterval,insertNodeAtCursor,initializePropertyHooks,toggleCursorVisibility,cursorBlinkTimers,addBlink,removeBlink,mouseDown,toggleLines,highlightStartIndex,highlightEndIndex,removeCursor,removeHighlight,clearOnMouseDown,moveHiddenInput,calculateIndex,addCursor,addCursorAtIndex,addHighlight,updateHighlightFormatting,onMouseDown,insertWrapper,setupKeyboardEvents,setupMenuEvents,fontsLoaded,spinner,setup,loadFonts,generateLatex,symbolToLatex,bigOperatorToLatex,functionToLatex,bracketToLatex,operatorToLatex,bracketPairToLatex,integralToLatex,accentToLatex,functionLowerToLatex,limitToLatex,logLowerToLatex,matrixToLatex,nthRootToLatex,squareRootToLatex,stackedFractionToLatex,subscriptToLatex,superscriptToLatex;Property.alreadyComputed=[],Property.isComputing=!1,Property.uniqueId=0,Property.postComputeHooks={},Property.beginComputing=function(){Property.isComputing=!0},Property.endComputing=function(){for(var a=0;a<Property.alreadyComputed.length;a++)Property.alreadyComputed[a].isAlreadyComputed=!1;Property.alreadyComputed=[],Property.isComputing=!1},eqEd=eqEd||{},getInternetExplorerVersion=function(){var b,c,a=-1;return"Microsoft Internet Explorer"==navigator.appName?(b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=c.exec(b)&&(a=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(b=navigator.userAgent,c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=c.exec(b)&&(a=parseFloat(RegExp.$1))),a},getChromeVersion=function(){return null===window.navigator.appVersion.match(/Chrome\/(.*?) /)?-1:parseInt(window.navigator.appVersion.match(/Chrome\/(\d+)\./)[1],10)},ChromeVersion=getChromeVersion(),IEVersion=getInternetExplorerVersion(),clearHighlighted=function(){var a;window.getSelection?a=window.getSelection().toString().length>0:document.selection&&"Control"!=document.selection.type&&(a=document.selection.createRange().text.length>0),a&&(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty&&document.selection.empty())},jQuery.fn.insertAt=function(a,b){var c=this.children().length;return 0>a&&(a=Math.max(0,c+1+a)),this.append(b),c>a&&this.children().eq(a).before(this.children().last()),this},$.getCSS=function(a,b){var c=$("<div>").css("display","none").addClass(a);$("body").append(c);try{return c.css(b)}finally{c.remove()}},Array.prototype.max=function(){return Math.max.apply(Math,this)},Array.prototype.getMaxIndex=function(){var b,a=0;for(b=1;b<this.length;b++)this[b]>this[a]&&(a=b);return a},Array.prototype.getMinIndex=function(){var b,a=0;for(b=1;b<this.length;b++)this[b]<this[a]&&(a=b);return a},Array.prototype.contains=function(a){return this.indexOf(a)>-1},randomIntFromInterval=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},insertNodeAtCursor=function(a){var b,c,d;window.getSelection?(b=window.getSelection(),b.getRangeAt&&b.rangeCount&&b.getRangeAt(0).insertNode(a)):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),d=3==a.nodeType?a.data:a.outerHTML,c.pasteHTML(d))},initializePropertyHooks=function(){Property.postComputeHooks["width"]=function(a){("undefined"==typeof a||null===a)&&(a=0);var b=this.getFontHeight();return a+(this.padLeft+this.padRight)*b},Property.postComputeHooks["height"]=function(a){("undefined"==typeof a||null===a)&&(a=0);var b=this.getFontHeight();return a+(this.padTop+this.padBottom)*b},Property.postComputeHooks["left"]=function(a){var b,c,d;return("undefined"==typeof a||null===a)&&(a=0),b=this.getFontHeight(),c=this.parent.getFontHeight(),d=0,d=this instanceof eqEd.Wrapper?this.adjustLeft*b:this.parent.padLeft*c+this.adjustLeft*b,a+d},Property.postComputeHooks["top"]=function(a){("undefined"==typeof a||null===a)&&(a=0);var b=this.getFontHeight();return a+(this.parent.padTop+this.adjustTop)*b},Property.postComputeHooks["topAlign"]=function(a){("undefined"==typeof a||null===a)&&(a=0);var b=this.getFontHeight();return a+this.padTop*b},Property.postComputeHooks["bottomAlign"]=function(a){("undefined"==typeof a||null===a)&&(a=0);var b=this.getFontHeight();return a+this.padBottom*b},Property.postComputeHooks["all"]=function(a,b){var c=!(null===a||isNaN(a)||a===!0||a===!1||"[object Array]"===Object.prototype.toString.call(a));return c&&"padLeft"!==b&&"padRight"!==b&&"padTop"!==b&&"padBottom"!==b&&"adjustTop"!==b&&"adjustLeft"!==b&&"heightRatio"!==b&&"accentGap"!==b&&"borderWidth"!==b&&(a=Math.ceil(a)),a}},eqEd.FontMetrics=function(){this.fontSizes=["fontSizeSmallest","fontSizeSmaller","fontSizeNormal"],this.fontStyles=["MathJax_MathItalic","MathJax_Main","MathJax_MainItalic","MathJax_Size1","MathJax_Size2","MathJax_Size3","MathJax_Size4"],this.MathJax_Main=["0","1","2","3","4","5","6","7","8","9","−","÷","⋅","≈","*","-","=","+","/","<",">","≤","≥","∞","%","!","$",".","(",")","[","]","{","}","∂","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","→","^","˙","Γ","Δ","Θ","Λ","Ξ","Π","Σ","Υ","Φ","Ψ","Ω","∈","⃗","¯","◦","×","±","∧","∨","∖","≡","≅","≠","∼","∝","≺","⪯","⊂","⊆","≻","⪰","⊥","∣","∥",":","′"],this.MathJax_MainItalic=["ı","ȷ"],this.MathJax_MathItalic=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Γ","Δ","Θ","Λ","Ξ","Π","Σ","Υ","Φ","Ψ","Ω","α","β","γ","δ","ε","ϵ","ζ","η","θ","ϑ","ι","κ","λ","μ","ν","ξ","π","ϖ","ρ","ϱ","σ","ς","τ","υ","φ","ϕ","χ","ψ","ω","ς","'"],this.MathJax_Size1=[],this.MathJax_Size2=[],this.MathJax_Size3=["(",")","{","}","[","]"],this.MathJax_Size4=["(",")","{","}","[","]","⎛","⎜","⎝","⎞","⎟","⎠","⎧","⎪","⎨","⎩","⎫","⎪","⎬","⎭","⎡","⎢","⎣","⎤","⎥","⎦"],this.character=[],this.shortCharacters=["a","c","e","g","ı","ȷ","m","n","o","p","q","r","s","u","v","w","x","y","z","α","γ","ε","ϵ","η","ι","κ","μ","ν","π","ϖ","ρ","ϱ","σ","ς","τ","υ","φ","χ","ω"],this.mediumCharacters=["i","j","t"],this.tallCharacters=["b","d","f","h","k","l","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","β","δ","ζ","θ","ϑ","λ","ξ","ϕ","ψ","Γ","Δ","Θ","Λ","Ξ","Π","Σ","Υ","Φ","Ψ","Ω"],this.charWidthExceedsBoundingBox={b:.01,c:.01,d:.01,f:.15,g:.01,q:.075,y:.01,z:.01,B:.01,C:.0875,E:.0875,F:.2,H:.1,I:.175,J:.15,K:.075,M:.075,N:.125,P:.175,R:.02,S:.04,T:.25,U:.15,V:.33,W:.13,X:.075,Y:.33,Z:.08,"β":.05,"γ":.05,"δ":.05,"ζ":.075,"η":.05,"θ":.025,"ν":.1,"ξ":.025,"π":.025,"ϖ":.025,"ρ":.025,"ϱ":.025,"σ":.015,"ς":.15,"τ":.185,"υ":.015,"ψ":.015,"ı":.15,"ȷ":.15},this.height={fontSizeMessage:parseInt($.getCSS("fontSizeMessage","font-size"),10),fontSizeSmallest:parseInt($.getCSS("fontSizeSmallest","font-size"),10),fontSizeSmaller:parseInt($.getCSS("fontSizeSmaller","font-size"),10),fontSizeNormal:parseInt($.getCSS("fontSizeNormal","font-size"),10)},this.width={},this.testDivId=randomIntFromInterval(1,1e4),this.computeSymbolSizes()},function(){eqEd.FontMetrics.prototype.addTestDiv=function(){$("body").append('<div id="testDiv'+this.testDivId+'" class="testEquation eqEdEquation"></div>')},eqEd.FontMetrics.prototype.removeTestDiv=function(){$("#testDiv"+this.testDivId).remove()},eqEd.FontMetrics.prototype.computeSymbolSizes=function(){var a,b,c,d,e,f,g,h;for(this.addTestDiv(),a=0;a<this.fontStyles.length;a++)for(b=this.fontStyles[a],c=0;c<this[b].length;c++)for(d=this[b][c],this.character.push(d),e=0;e<this.fontSizes.length;e++)f=this.fontSizes[e],$("#testDiv"+this.testDivId).append('<div class="'+f+" "+b+' fontTest" id="fontTest">'+d+"</div>"),g=$("#fontTest"),"undefined"==typeof this.width[d]&&(this.width[d]={}),"undefined"==typeof this.height[d]&&(this.height[d]={}),"undefined"==typeof this.width[d][b]&&(this.width[d][b]={}),"undefined"==typeof this.height[d][b]&&(this.height[d][b]={}),h="undefined"!=typeof this.charWidthExceedsBoundingBox[d]?this.charWidthExceedsBoundingBox[d]:0,this.width[d][b][f]=g.outerWidth()*(1+h),g.remove();this.removeTestDiv()}}(),eqEd.EquationComponent=function(){this.className="eqEd.EquationComponent",this.equation=null,this.parent=null,this.properties=[],this.left=0,this.top=0,this.width=0,this.height=0,this.padLeft=0,this.padRight=0,this.padTop=0,this.padBottom=0,this.adjustLeft=0,this.adjustTop=0,this.domObj=null,this.children=[]},function(){eqEd.EquationComponent.prototype.constructor=eqEd.EquationComponent,eqEd.EquationComponent.prototype.clone=function(){return new this.constructor},eqEd.EquationComponent.prototype.buildDomObj=function(){},eqEd.EquationComponent.prototype.update=function(){var a;for(a=0;a<this.properties.length;a++)this.properties[a].compute();for(a=0;a<this.children.length;a++)this.children[a].update()},eqEd.EquationComponent.prototype.updateAll=function(){Property.beginComputing();var a=null;a=this instanceof eqEd.Equation?this:this.equation,a.update(),Property.endComputing()},eqEd.EquationComponent.prototype.getFontHeight=function(){for(var b,a=this;"undefined"==typeof a.fontSize;)a=a.parent;return b=null,b=this instanceof eqEd.Equation?this:this.equation,b.fontMetrics.height[a.fontSize]}}(),eqEd.BoundEquationComponent=function(a){eqEd.EquationComponent.call(this),this.className="eqEd.BoundEquationComponent",this.parent=a,this.equation=null===a?null:a.equation},function(){eqEd.BoundEquationComponent.prototype=Object.create(eqEd.EquationComponent.prototype),eqEd.BoundEquationComponent.prototype.clone=function(){return new this.constructor(this.parent)}}(),eqEd.Equation=function(){var a,b;eqEd.EquationComponent.call(this),this.className="eqEd.Equation",this.fontMetrics=new eqEd.FontMetrics,this.topLevelContainer=new eqEd.TopLevelContainer(this),this.domObj=this.buildDomObj(),this.domObj.append(this.topLevelContainer.domObj),this.fontSize="fontSizeNormal",this.children=[this.topLevelContainer],a=0,this.properties.push(new Property(this,"width",a,{get:function(){return a},set:function(b){a=b},compute:function(){return this.topLevelContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),b=0,this.properties.push(new Property(this,"height",b,{get:function(){return b},set:function(a){b=a},compute:function(){return this.topLevelContainer.height},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.Equation.prototype=Object.create(eqEd.EquationComponent.prototype),eqEd.Equation.prototype.constructor=eqEd.Equation,eqEd.Equation.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="eqEdEquation"></div>')},eqEd.Equation.prototype.clone=function(){return new this.constructor},eqEd.Equation.prototype.buildJsonObj=function(){var a={type:"Equation",value:null,operands:{topLevelContainer:this.topLevelContainer.buildJsonObj()}};return a},eqEd.Equation.constructFromJsonObj=function(a){var c,d,e,b=new eqEd.Equation;for(c=0;c<a.operands.topLevelContainer.length;c++)d=eqEd.Equation.JsonTypeToConstructor(a.operands.topLevelContainer[c].type),e=d.constructFromJsonObj(a.operands.topLevelContainer[c],b),b.topLevelContainer.addWrappers([c,e]);return b},eqEd.Equation.JsonTypeToConstructor=function(a){var b={Accent:eqEd.AccentWrapper,BigOperator:eqEd.BigOperatorWrapper,BracketPair:eqEd.BracketPairWrapper,Bracket:eqEd.BracketWrapper,Equation:eqEd.Equation,FunctionLower:eqEd.FunctionLowerWrapper,Function:eqEd.FunctionWrapper,Integral:eqEd.IntegralWrapper,Limit:eqEd.LimitWrapper,LogLower:eqEd.LogLowerWrapper,Matrix:eqEd.MatrixWrapper,NthRoot:eqEd.NthRootWrapper,Operator:eqEd.OperatorWrapper,SquareRoot:eqEd.SquareRootWrapper,StackedFraction:eqEd.StackedFractionWrapper,Subscript:eqEd.SubscriptWrapper,SuperscriptAndSubscript:eqEd.SuperscriptAndSubscriptWrapper,Superscript:eqEd.SuperscriptWrapper,Symbol:eqEd.SymbolWrapper};return b[a]}}(),eqEd.EquationDom=function(a,b){this.className="eqEd.EquationDom",this.binding=a,this.html=b,this.value=$(b),this.value.data("eqObject",this.binding),this.width=0,this.height=0,this.left=0,this.top=0,this.value.attr("contenteditable",!1),this.value.attr("autocomplete","off"),this.value.attr("autocorrect","off"),this.value.attr("autocapitalize","off"),this.value.attr("spellcheck",!1),this.value.focus(),this.value.blur()},eqEd.EquationDom.prototype.constructor=eqEd.EquationDom,eqEd.EquationDom.prototype.updateWidth=function(a){this.width=a,this.value.css("width",a+"px")},eqEd.EquationDom.prototype.updateHeight=function(a){this.height=a,this.value.css("height",a+"px")},eqEd.EquationDom.prototype.updateLeft=function(a){this.left=a,this.value.css("left",a+"px")},eqEd.EquationDom.prototype.updateTop=function(a){this.top=a,this.value.css("top",a+"px")},eqEd.EquationDom.prototype.clone=function(){var a=new eqEd.EquationDom(this.binding,this.html);return a.updateWidth(this.width),a.updateHeight(this.height),a.updateLeft(this.left),a.updateTop(this.top),a},eqEd.EquationDom.prototype.append=function(a){this.value.append(a.value)},eqEd.EquationDom.prototype.empty=function(){this.value.empty()},eqEd.EquationDom.prototype.addClass=function(a){this.value.addClass(a)},eqEd.EquationDom.prototype.updateFontSize=function(a){this.value.removeClass("fontSizeNormal"),this.value.removeClass("fontSizeSmaller"),this.value.removeClass("fontSizeSmallest"),this.value.addClass(a)},eqEd.EquationDom.prototype.updateBorderWidth=function(a){this.value.css("border-width",a+"px")},eqEd.Container=function(a){var b,c,d,e,f;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.Container",this.wrappers=[],this.fontSize="",b=null,this.properties.push(new Property(this,"maxTopAlignIndex",b,{get:function(){return b},set:function(a){b=a},compute:function(){var b,a=0;for(b=1;b<this.wrappers.length;b++)this.wrappers[b].topAlign>this.wrappers[a].topAlign&&(a=b);return 0===this.wrappers.length?null:a},updateDom:function(){}})),c=null,this.properties.push(new Property(this,"maxBottomAlignIndex",c,{get:function(){return c},set:function(a){c=a},compute:function(){var b,a=0;for(b=1;b<this.wrappers.length;b++)this.wrappers[b].bottomAlign>this.wrappers[a].bottomAlign&&(a=b);return 0===this.wrappers.length?null:a},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"width",d,{get:function(){return d},set:function(a){d=a},compute:function(){var b,a=0;for(b=0;b<this.wrappers.length;b++)a+=this.wrappers[b].width;return a},updateDom:function(){this.domObj.updateWidth(this.width)}})),e=0,this.properties.push(new Property(this,"height",e,{get:function(){return e},set:function(a){e=a},compute:function(){return this.wrappers.length>0?this.wrappers[this.maxTopAlignIndex].topAlign+this.wrappers[this.maxBottomAlignIndex].bottomAlign:0},updateDom:function(){this.domObj.updateHeight(this.height)}})),f="",this.properties.push(new Property(this,"clipping",f,{get:function(){return f},set:function(a){f=a},compute:function(){return"0px "+(this.width+5)+"px "+(e+2)+"px "+-5+"px"},updateDom:function(){this.domObj.updateClipping(this.clipping)}}))},function(){eqEd.Container.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.Container.prototype.constructor=eqEd.Container,eqEd.Container.prototype.updateWrapperProperties=function(){for(var a=0;a<this.wrappers.length;a++)this.wrappers[a].index=a,this.wrappers[a].parent=this,this.wrappers[a].equation=this.equation},eqEd.Container.prototype.addWrappers=function(a){var b,c,d;for(a=Array.prototype.slice.call(arguments),a=_.sortBy(a,function(a){return a[0]}),(this.wrappers[0]instanceof eqEd.EmptyContainerWrapper||this.wrappers[0]instanceof eqEd.SquareEmptyContainerFillerWrapper)&&this.removeWrappers(0),b=0;b<a.length;b++)c=a[b][0],d=a[b][1],this.wrappers.splice(c,0,d),this.domObj.addWrapper(c,d);this.updateWrapperProperties()},eqEd.Container.prototype.removeWrappers=function(a){var d,e;for(a=Array.prototype.slice.call(arguments),a[a.getMaxIndex()],a[a.getMinIndex()],d=0,e=0;e<a.length;e++)this.wrappers.splice(a[e]-d,1),this.domObj.removeWrapper(a[e]-d),d+=1;-this.updateWrapperProperties()},eqEd.Container.prototype.update=function(){var a;for(a=0;a<this.properties.length;a++)this.properties[a].compute();for(a=0;a<this.wrappers.length;a++)this.wrappers[a].update()},eqEd.Container.prototype.clone=function(){var c,a=new this.constructor(this.parent),b=[];for(c=0;c<this.wrappers.length;c++)b.push([c,this.wrappers[c].clone()]);return eqEd.Container.prototype.addWrappers.apply(a,b),a},eqEd.Container.prototype.buildJsonObj=function(){var b,a=[];if(!(this.wrappers[0]instanceof eqEd.EmptyContainerWrapper))for(b=0;b<this.wrappers.length;b++)a.push(this.wrappers[b].buildJsonObj());return a},eqEd.Container.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer"></div>')}}(),eqEd.ContainerDom=function(a,b){eqEd.EquationDom.call(this,a,b),this.className="eqEd.ContainerDom"},eqEd.ContainerDom.prototype=Object.create(eqEd.EquationDom.prototype),eqEd.ContainerDom.prototype.constructor=eqEd.ContainerDom,eqEd.ContainerDom.prototype.addWrapper=function(a,b){this.value.insertAt(a,b.domObj.value)},eqEd.ContainerDom.prototype.removeWrapper=function(a){this.value.children().eq(a).remove()},eqEd.ContainerDom.prototype.updateClipping=function(a){this.value.css("clip","rect("+a+")")},eqEd.Wrapper=function(a){var b,c,d;eqEd.EquationComponent.call(this),this.className="eqEd.Wrapper",this.equation=a,this.topAlign=0,this.bottomAlign=0,this.index=null,this.childContainers=[],this.childNoncontainers=[],b=0,this.properties.push(new Property(this,"left",b,{get:function(){return b},set:function(a){b=a},compute:function(){var b,a=0;return 0===this.index?a=this.parent.padLeft:(b=this.parent.wrappers[this.index-1],a=b.left+b.width),a},updateDom:function(){this.domObj.updateLeft(this.left)}})),c=0,this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.parent.wrappers[this.parent.maxTopAlignIndex].topAlign-this.topAlign},updateDom:function(){this.domObj.updateTop(this.top)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.topAlign+this.bottomAlign},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.Wrapper.prototype=Object.create(eqEd.EquationComponent.prototype),eqEd.Wrapper.prototype.constructor=eqEd.Wrapper,eqEd.Wrapper.prototype.update=function(){var a;for(a=0;a<this.properties.length;a++)this.properties[a].compute();for(a=0;a<this.childContainers.length;a++)this.childContainers[a].update();for(a=0;a<this.childNoncontainers.length;a++)this.childNoncontainers[a].update()},eqEd.Wrapper.prototype.buildJsonObj=function(){},eqEd.Wrapper.prototype.clone=function(){}}(),eqEd.WrapperDom=function(a,b){eqEd.EquationDom.call(this,a,b),this.className="eqEd.WrapperDom"},eqEd.WrapperDom.prototype=Object.create(eqEd.EquationDom.prototype),eqEd.WrapperDom.prototype.constructor=eqEd.WrapperDom,eqEd.Symbol=function(a,b,c){var d,e,f,g;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.Symbol",this.character=b,this.fontStyle=c,this.domObj=this.buildDomObj(),this.adjustTop=IEVersion>=9?"MathJax_MathItalic"===this.fontStyle?.34:.28:"MathJax_MathItalic"===this.fontStyle?.085:.025,d=0,this.properties.push(new Property(this,"width",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.equation.fontMetrics.width[this.character][this.fontStyle][this.parent.parent.fontSize]},updateDom:function(){null!==this.parent&&this.parent.parent.parent instanceof eqEd.AccentContainer&&("i"===this.character?(this.character="ı",this.domObj=this.buildDomObj()):"j"===this.character&&(this.character="ȷ",this.domObj=this.buildDomObj())),this.domObj.updateWidth(this.width)}})),e=0,this.properties.push(new Property(this,"height",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.getFontHeight();return 1*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),f=0,this.properties.push(new Property(this,"left",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),g=0,this.properties.push(new Property(this,"top",g,{get:function(){return g},set:function(a){g=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.Symbol.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.Symbol.prototype.constructor=eqEd.Symbol,eqEd.Symbol.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="symbol '+this.fontStyle+'">'+this.character+"</div>")}}(),eqEd.SymbolWrapper=function(a,b,c){var d,e,f,g,h,i;eqEd.Wrapper.call(this,a),this.className="eqEd.SymbolWrapper",this.symbol=new eqEd.Symbol(this,b,c),this.domObj=this.buildDomObj(),this.domObj.append(this.symbol.domObj),this.childNoncontainers=[this.symbol],d=0,this.properties.push(new Property(this,"isDifferential",d,{get:function(){return d},set:function(a){d=a},compute:function(){var b,c,d,e,a=!1;if("d"===this.symbol.character&&this.index!==this.parent.wrappers.length-1&&this.parent.wrappers[this.index+1]instanceof eqEd.SymbolWrapper&&"d"!==this.parent.wrappers[this.index+1].symbol.character){for(b=0,c=0,d=0;d<this.index;d++)e=this.parent.wrappers[d],e instanceof eqEd.IntegralWrapper?b+=e.numIntegrals:e instanceof eqEd.SymbolWrapper&&"d"===e.symbol.character&&this.parent.wrappers[d+1]instanceof eqEd.SymbolWrapper&&"d"!==this.parent.wrappers[d+1].symbol.character&&c++;b>c&&(a=!0)}return a},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"padLeft",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=0;return this.isDifferential&&(a=.15),0===this.index,a},updateDom:function(){}})),f=0,this.properties.push(new Property(this,"padRight",f,{get:function(){return f},set:function(a){f=a},compute:function(){var a=0;return 0!==this.index&&this.parent.wrappers[this.index-1].isDifferential&&(a+=0),a},updateDom:function(){}})),g=0,this.properties.push(new Property(this,"width",g,{get:function(){return g},set:function(a){g=a},compute:function(){return this.symbol.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),h=0,this.properties.push(new Property(this,"topAlign",h,{get:function(){return h},set:function(a){h=a},compute:function(){return.6*this.symbol.height},updateDom:function(){}})),i=0,this.properties.push(new Property(this,"bottomAlign",i,{get:function(){return i},set:function(a){i=a},compute:function(){return.4*this.symbol.height},updateDom:function(){}}))},function(){eqEd.SymbolWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.SymbolWrapper.prototype.constructor=eqEd.SymbolWrapper,eqEd.SymbolWrapper.prototype.clone=function(){return new this.constructor(this.equation,this.symbol.character,this.symbol.fontStyle)},eqEd.SymbolWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper symbolWrapper"></div>')},eqEd.SymbolWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:this.symbol.character,operands:null};return a},eqEd.SymbolWrapper.constructFromJsonObj=function(a,b){var d,c="";return-1!==_.indexOf(b.fontMetrics.MathJax_MathItalic,a.value)?c="MathJax_MathItalic":-1!==_.indexOf(b.fontMetrics.MathJax_Main,a.value)?c="MathJax_Main":-1!==_.indexOf(b.fontMetrics.MathJax_MainItalic,a.value)&&(c="MathJax_MainItalic"),d=new eqEd.SymbolWrapper(b,a.value,c)}}(),eqEd.OperatorWrapper=function(a,b,c){var d,e,f,g,h,i,j;eqEd.Wrapper.call(this,a),this.className="eqEd.OperatorWrapper",this.operatorSymbol=b,this.operator=new eqEd.Symbol(this,b,c),this.domObj=this.buildDomObj(),this.domObj.append(this.operator.domObj),this.childNoncontainers=[this.operator],d=!1,this.properties.push(new Property(this,"isUnary",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=!1,b=this.index;return!(0===b||this.parent.wrappers[b-1]instanceof eqEd.OperatorWrapper||this.parent.wrappers[b-1]instanceof eqEd.BracketWrapper&&this.parent.wrappers[b-1].bracket instanceof eqEd.LeftBracket)||"+"!==this.operator.character&&"−"!==this.operator.character||(a=!0),a},updateDom:function(){}})),e=!1,this.properties.push(new Property(this,"isComparison",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=!1;return("="===this.operator.character||"<"===this.operator.character||">"===this.operator.character||"≤"===this.operator.character||"≥"===this.operator.character||"≈"===this.operator.character||"≡"===this.operator.character||"≅"===this.operator.character||"≠"===this.operator.character||"∼"===this.operator.character||"∝"===this.operator.character||"≺"===this.operator.character||"⪯"===this.operator.character||"⊂"===this.operator.character||"⊆"===this.operator.character||"≻"===this.operator.character||"⪰"===this.operator.character)&&(a=!0),a},updateDom:function(){}})),f=!1,this.properties.push(new Property(this,"padLeft",f,{get:function(){return f},set:function(a){f=a},compute:function(){var a=.15;return this.isComparison?a=.2:this.isUnary&&0===this.index&&(a=0),a},updateDom:function(){}})),g=!1,this.properties.push(new Property(this,"padRight",g,{get:function(){return g},set:function(a){g=a},compute:function(){var a=0;return a=this.isUnary?0:this.isComparison?.2:.15},updateDom:function(){}})),h=0,this.properties.push(new Property(this,"width",h,{get:function(){return h},set:function(a){h=a},compute:function(){return this.operator.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),i=0,this.properties.push(new Property(this,"topAlign",i,{get:function(){return i},set:function(a){i=a},compute:function(){return.62*this.operator.height},updateDom:function(){}})),j=0,this.properties.push(new Property(this,"bottomAlign",j,{get:function(){return j},set:function(a){j=a},compute:function(){return.38*this.operator.height},updateDom:function(){}}))},function(){eqEd.OperatorWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.OperatorWrapper.prototype.constructor=eqEd.OperatorWrapper,eqEd.OperatorWrapper.prototype.clone=function(){return new this.constructor(this.equation,this.operatorSymbol,this.operator.fontStyle)},eqEd.OperatorWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper operatorWrapper"></div>')},eqEd.OperatorWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:this.operator.character,operands:null};return a},eqEd.OperatorWrapper.constructFromJsonObj=function(a,b){var c=new eqEd.OperatorWrapper(b,a.value,"MathJax_Main");return c}}(),eqEd.EmptyContainerWrapper=function(a){eqEd.Wrapper.call(this,a),this.className="eqEd.EmptyContainerWrapper"},function(){eqEd.EmptyContainerWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.EmptyContainerWrapper.prototype.constructor=eqEd.EmptyContainerWrapper}(),eqEd.TopLevelEmptyContainerWrapper=function(a){var b,c,d;eqEd.EmptyContainerWrapper.call(this,a),this.className="eqEd.EmptyContainerWrapper",this.topLevelEmptyContainerMessage=new eqEd.TopLevelEmptyContainerMessage(this),this.domObj=this.buildDomObj(),this.domObj.append(this.topLevelEmptyContainerMessage.domObj),this.childNoncontainers=[this.topLevelEmptyContainerMessage],this.padLeft=.25,this.padRight=.25,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return this.topLevelEmptyContainerMessage.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"topAlign",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.getFontHeight();return.5*a},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"bottomAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.getFontHeight();return.5*a},updateDom:function(){}}))},function(){eqEd.TopLevelEmptyContainerWrapper.prototype=Object.create(eqEd.EmptyContainerWrapper.prototype),eqEd.TopLevelEmptyContainerWrapper.prototype.constructor=eqEd.TopLevelEmptyContainerWrapper,eqEd.TopLevelEmptyContainerWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper emptyContainerWrapper topLevelEmptyContainerWrapper"></div>')}}(),eqEd.TopLevelEmptyContainerMessage=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.TopLevelEmptyContainerMessage",this.message="Enter&nbsp;Your&nbsp;Equation&nbsp;Here",this.fontSize="fontSizeMessage",this.domObj=this.buildDomObj(),b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return this.domObj.value.width()},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.domObj.value.height()},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.getFontHeight();return.5*(this.parent.height-this.height)-this.parent.padTop*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.TopLevelEmptyContainerMessage.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.TopLevelEmptyContainerMessage.prototype.constructor=eqEd.TopLevelEmptyContainerMessage,eqEd.TopLevelEmptyContainerMessage.prototype.clone=function(){return new this.constructor},eqEd.TopLevelEmptyContainerMessage.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<span class="topLevelEmptyContainerMessage '+this.fontSize+'">'+this.message+"</span>")}}(),eqEd.SquareEmptyContainerWrapper=function(a){var b,c,d;eqEd.EmptyContainerWrapper.call(this,a),this.className="eqEd.SquareEmptyContainerWrapper",this.squareEmptyContainer=new eqEd.SquareEmptyContainer(this),this.domObj=this.buildDomObj(),this.domObj.append(this.squareEmptyContainer.domObj),this.childContainers=[this.squareEmptyContainer],this.padLeft=.05,this.padRight=.05,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return this.squareEmptyContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)
}})),c=0,this.properties.push(new Property(this,"topAlign",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize];return.5*a},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"bottomAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize];return.5*a},updateDom:function(){}}))},function(){eqEd.SquareEmptyContainerWrapper.prototype=Object.create(eqEd.EmptyContainerWrapper.prototype),eqEd.SquareEmptyContainerWrapper.prototype.constructor=eqEd.SquareEmptyContainerWrapper,eqEd.SquareEmptyContainerWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper emptyContainerWrapper squareEmptyContainerWrapper"></div>')},eqEd.SquareEmptyContainerWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.squareEmptyContainer=this.squareEmptyContainer.clone(),a.squareEmptyContainer.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.squareEmptyContainer.domObj),a.childContainers=[a.squareEmptyContainer],a}}(),eqEd.SquareEmptyContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.SquareEmptyContainer",this.borderWidth=4,this.fontSize="fontSizeNormal",this.domObj=this.buildDomObj(),this.squareEmptyContainerFillerWrapper=new eqEd.SquareEmptyContainerFillerWrapper(this.equation),this.addWrappers([0,this.squareEmptyContainerFillerWrapper]),b=0,this.properties.push(new Property(this,"left",b,{get:function(){return b},set:function(a){b=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),c=0,this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.fontSize];return.5*a-.5*this.squareEmptyContainerFillerWrapper.height},updateDom:function(){this.domObj.updateTop(this.top)}})),d="",this.properties.push(new Property(this,"fontSize",d,{get:function(){return d},set:function(a){d=a},compute:function(){for(var a=this.parent.parent;a instanceof eqEd.BracketContainer;)a=a.parent.parent;return a.fontSize},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}})),e=0,this.properties.push(new Property(this,"borderWidth",d,{get:function(){return e},set:function(a){e=a},compute:function(){return.088*this.equation.fontMetrics.height["fontSizeNormal"]},updateDom:function(){this.domObj.updateBorderWidth(e)}}))},function(){eqEd.SquareEmptyContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.SquareEmptyContainer.prototype.constructor=eqEd.SquareEmptyContainer,eqEd.SquareEmptyContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer squareEmptyContainer '+this.fontSize+'"></div>')}}(),eqEd.SquareEmptyContainerFillerWrapper=function(a){var b,c,d;eqEd.Wrapper.call(this,a),this.className="eqEd.SquareEmptyContainerFillerWrapper",this.domObj=this.buildDomObj(),this.sideLength=.85,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize];return this.sideLength*a},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"topAlign",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize];return.5*this.sideLength*a},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"bottomAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize];return.5*this.sideLength*a},updateDom:function(){}}))},function(){eqEd.SquareEmptyContainerFillerWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.SquareEmptyContainerFillerWrapper.prototype.constructor=eqEd.SquareEmptyContainerFillerWrapper,eqEd.SquareEmptyContainerFillerWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper squareEmptyContainerFillerWrapper"></div>')},eqEd.SquareEmptyContainerFillerWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a}}(),eqEd.StackedFractionWrapper=function(a){var b,c,d;eqEd.Wrapper.call(this,a),this.className="eqEd.StackedFractionWrapper",this.stackedFractionNumeratorContainer=new eqEd.StackedFractionNumeratorContainer(this),this.stackedFractionDenominatorContainer=new eqEd.StackedFractionDenominatorContainer(this),this.stackedFractionHorizontalBar=new eqEd.StackedFractionHorizontalBar(this),this.domObj=this.buildDomObj(),this.domObj.append(this.stackedFractionNumeratorContainer.domObj),this.domObj.append(this.stackedFractionDenominatorContainer.domObj),this.domObj.append(this.stackedFractionHorizontalBar.domObj),this.childNoncontainers=[this.stackedFractionHorizontalBar],this.childContainers=[this.stackedFractionNumeratorContainer,this.stackedFractionDenominatorContainer],this.padLeft=.05,this.padRight=.05,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return this.stackedFractionHorizontalBar.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"topAlign",c,{get:function(){return c},set:function(a){c=a},compute:function(){return.5*this.stackedFractionHorizontalBar.height+this.stackedFractionNumeratorContainer.height},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"bottomAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){return.5*this.stackedFractionHorizontalBar.height+this.stackedFractionDenominatorContainer.height},updateDom:function(){}}))},function(){eqEd.StackedFractionWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.StackedFractionWrapper.prototype.constructor=eqEd.StackedFractionWrapper,eqEd.StackedFractionWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper stackedFractionWrapper"></div>')},eqEd.StackedFractionWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.stackedFractionNumeratorContainer=this.stackedFractionNumeratorContainer.clone(),a.stackedFractionNumeratorContainer.parent=a,a.stackedFractionDenominatorContainer=this.stackedFractionDenominatorContainer.clone(),a.stackedFractionDenominatorContainer.parent=a,a.stackedFractionHorizontalBar=this.stackedFractionHorizontalBar.clone(),a.stackedFractionHorizontalBar.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.stackedFractionNumeratorContainer.domObj),a.domObj.append(a.stackedFractionDenominatorContainer.domObj),a.domObj.append(a.stackedFractionHorizontalBar.domObj),a.childNoncontainers=[a.stackedFractionHorizontalBar],a.childContainers=[a.stackedFractionNumeratorContainer,a.stackedFractionDenominatorContainer],a},eqEd.StackedFractionWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{numerator:this.stackedFractionNumeratorContainer.buildJsonObj(),denominator:this.stackedFractionDenominatorContainer.buildJsonObj()}};return a},eqEd.StackedFractionWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.StackedFractionWrapper(b);for(d=0;d<a.operands.numerator.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.numerator[d].type),f=e.constructFromJsonObj(a.operands.numerator[d],b),c.stackedFractionNumeratorContainer.addWrappers([d,f]);for(d=0;d<a.operands.denominator.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.denominator[d].type),f=e.constructFromJsonObj(a.operands.denominator[d],b),c.stackedFractionDenominatorContainer.addWrappers([d,f]);return c}}(),eqEd.StackedFractionNumeratorContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.StackedFractionNumeratorContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),this.padBottom=.025,this.padTop=.025,c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.width>this.parent.stackedFractionDenominatorContainer.width?this.width:this.parent.stackedFractionDenominatorContainer.width;return.5*(b-this.width)+.5*this.parent.stackedFractionHorizontalBar.exceedsMaxNumDenomWidth*a},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){for(var a="",b=this.parent.parent;b instanceof eqEd.BracketContainer;)b=b.parent.parent;return a="fontSizeSmaller"===b.fontSize||"fontSizeSmallest"===b.fontSize?"fontSizeSmallest":b.parent instanceof eqEd.StackedFractionWrapper?"fontSizeSmaller":"fontSizeNormal"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.StackedFractionNumeratorContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.StackedFractionNumeratorContainer.prototype.constructor=eqEd.StackedFractionNumeratorContainer,eqEd.StackedFractionNumeratorContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer stackedFractionNumeratorContainer"></div>')}}(),eqEd.StackedFractionDenominatorContainer=function(a){var b,c,d,e,f;eqEd.Container.call(this,a),this.className="eqEd.StackedFractionDenominatorContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),this.padBottom=.025,this.padTop=.025,c=0,this.properties.push(new Property(this,"padTop",c,{get:function(){return c},set:function(a){c=a},compute:function(){var c,a=.025,b=!1;for(c=0;c<this.wrappers.length;c++)if(this.wrappers[c]instanceof eqEd.SquareRootWrapper||this.wrappers[c]instanceof eqEd.NthRootWrapper){b=!0;break}return b&&(a=.1),a},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.width>this.parent.stackedFractionNumeratorContainer.width?this.width:this.parent.stackedFractionNumeratorContainer.width;return.5*(b-this.width)+.5*this.parent.stackedFractionHorizontalBar.exceedsMaxNumDenomWidth*a},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return this.parent.stackedFractionNumeratorContainer.height+this.parent.stackedFractionHorizontalBar.height},updateDom:function(){this.domObj.updateTop(this.top)}})),f="",this.properties.push(new Property(this,"fontSize",f,{get:function(){return f},set:function(a){f=a},compute:function(){for(var a="",b=this.parent.parent;b instanceof eqEd.BracketContainer;)b=b.parent.parent;return a="fontSizeSmaller"===b.fontSize||"fontSizeSmallest"===b.fontSize?"fontSizeSmallest":b.parent instanceof eqEd.StackedFractionWrapper?"fontSizeSmaller":"fontSizeNormal"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.StackedFractionDenominatorContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.StackedFractionDenominatorContainer.prototype.constructor=eqEd.StackedFractionDenominatorContainer,eqEd.StackedFractionDenominatorContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer stackedFractionDenominatorContainer"></div>')}}(),eqEd.StackedFractionHorizontalBar=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.StackedFractionHorizontalBar",this.domObj=this.buildDomObj(),this.exceedsMaxNumDenomWidth=.25,this.barHeightRatio=.05,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.stackedFractionDenominatorContainer.width>this.parent.stackedFractionNumeratorContainer.width?this.parent.stackedFractionDenominatorContainer.width:this.parent.stackedFractionNumeratorContainer.width;return b+this.exceedsMaxNumDenomWidth*a},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height["fontSizeNormal"];return this.barHeightRatio*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return this.parent.stackedFractionNumeratorContainer.height},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.StackedFractionHorizontalBar.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.StackedFractionHorizontalBar.prototype.constructor=eqEd.StackedFractionHorizontalBar,eqEd.StackedFractionHorizontalBar.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="stackedFractionHorizontalBar"></div>')}}(),eqEd.SuperscriptWrapper=function(a){var b,c,d,e;eqEd.Wrapper.call(this,a),this.className="eqEd.SuperscriptWrapper",this.superscriptContainer=new eqEd.SuperscriptContainer(this),this.domObj=this.buildDomObj(),this.domObj.append(this.superscriptContainer.domObj),this.childContainers=[this.superscriptContainer],this.maxBaseWrapperOverlap=.9,b=0,this.properties.push(new Property(this,"padRight",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=.05;return 0!==this.index&&this.parent.wrappers[this.index-1]instanceof eqEd.FunctionWrapper&&(a=this.parent.wrappers[this.index+1]instanceof eqEd.BracketWrapper||this.parent.wrappers[this.index+1]instanceof eqEd.BracketPairWrapper?.05:.175),a},updateDom:function(){}})),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.superscriptContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"topAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var d,e,f,g,h,i,j,k,l,a=this.equation.fontMetrics.height[this.parent.fontSize],b=null;if(0!==this.index)b=this.parent.wrappers[this.index-1];else for(b=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),b.parent=this.parent,b.index=0,d=0;d<b.properties.length;d++)e=b.properties[d],"top"!==e.propName&&"left"!==e.propName&&e.compute();return f=0,g=0,h=0,0!==this.superscriptContainer.wrappers.length&&(g=this.superscriptContainer.wrappers[this.superscriptContainer.maxTopAlignIndex].topAlign,h=this.superscriptContainer.wrappers[this.superscriptContainer.maxBottomAlignIndex].bottomAlign),b instanceof eqEd.NthRootWrapper?f=b.nthRootDegreeContainer.isLeftFlushToWrapper?b.nthRootDiagonal.height+g-b.bottomAlign:b.topAlign+g:b instanceof eqEd.SquareRootWrapper?f=b.topAlign+g:b instanceof eqEd.SuperscriptWrapper||b instanceof eqEd.SuperscriptAndSubscriptWrapper?(i=b.superscriptContainer,j=0,0!==i.wrappers.length&&(j=i.wrappers[i.maxTopAlignIndex].topAlign),k=.15,l=.75,f=h+k*a>l*i.height?b.topAlign+(this.superscriptContainer.height-l*i.height):b.topAlign+g-k*a):(k=.3,l=.75,f=h+k*a>l*b.height?b.topAlign+(this.superscriptContainer.height-l*b.height):b.topAlign+g-k*a),f},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"bottomAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var b,c,a=null;if(0!==this.index)a=this.parent.wrappers[this.index-1];else for(a=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),a.index=0,a.parent=this.parent,b=0;b<a.properties.length;b++)c=a.properties[b],"top"!==c.propName&&"left"!==c.propName&&c.compute();return a.bottomAlign},updateDom:function(){}}))},function(){eqEd.SuperscriptWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.SuperscriptWrapper.prototype.constructor=eqEd.SuperscriptWrapper,eqEd.SuperscriptWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper superscriptWrapper"></div>')},eqEd.SuperscriptWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.superscriptContainer=this.superscriptContainer.clone(),a.superscriptContainer.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.superscriptContainer.domObj),a.childContainers=[a.superscriptContainer],a},eqEd.SuperscriptWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{superscript:this.superscriptContainer.buildJsonObj()}};return a},eqEd.SuperscriptWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.SuperscriptWrapper(b);for(d=0;d<a.operands.superscript.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.superscript[d].type),f=e.constructFromJsonObj(a.operands.superscript[d],b),c.superscriptContainer.addWrappers([d,f]);return c}}(),eqEd.SuperscriptContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.SuperscriptContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){var c,a="",b=null;for(b=0!==this.parent.index?this.parent.parent.wrappers[this.parent.index-1]:null,c=this.parent.parent;c instanceof eqEd.BracketContainer;)c=c.parent.parent;return a="fontSizeSmaller"===c.fontSize||"fontSizeSmallest"===c.fontSize?"fontSizeSmallest":b instanceof eqEd.SuperscriptWrapper||b instanceof eqEd.SuperscriptAndSubscriptWrapper?"fontSizeSmallest":"fontSizeSmaller"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.SuperscriptContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.SuperscriptContainer.prototype.constructor=eqEd.SuperscriptContainer,eqEd.SuperscriptContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer superscriptContainer"></div>')}}(),eqEd.SubscriptWrapper=function(a){var b,c,d,e;eqEd.Wrapper.call(this,a),this.className="eqEd.SubscriptWrapper",this.subscriptContainer=new eqEd.SubscriptContainer(this),this.domObj=this.buildDomObj(),this.domObj.append(this.subscriptContainer.domObj),this.childContainers=[this.subscriptContainer],b=0,this.properties.push(new Property(this,"padRight",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=.05;return 0!==this.index&&this.parent.wrappers[this.index-1]instanceof eqEd.FunctionWrapper&&(a=this.parent.wrappers[this.index+1]instanceof eqEd.BracketWrapper||this.parent.wrappers[this.index+1]instanceof eqEd.BracketPairWrapper?.05:.175),a},updateDom:function(){}})),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.subscriptContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"topAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var b,c,a=null;if(0!==this.index)a=this.parent.wrappers[this.index-1];else for(a=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),a.index=0,a.parent=this.parent,b=0;b<a.properties.length;b++)c=a.properties[b],"top"!==c.propName&&"left"!==c.propName&&c.compute();return a.topAlign},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"bottomAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var c,d,e,a=null,b=null;if(0!==this.index)a=this.parent.wrappers[this.index-1],b=a instanceof eqEd.SubscriptWrapper?a.subscriptContainer:a;else for(a=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),a.index=0,a.parent=this.parent,c=0;c<a.properties.length;c++)d=a.properties[c],"top"!==d.propName&&"left"!==d.propName&&d.compute();return e=this.equation.fontMetrics.height[this.subscriptContainer.fontSize],this.subscriptContainer.height+a.bottomAlign-this.subscriptContainer.offsetTop*e},updateDom:function(){}}))},function(){eqEd.SubscriptWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.SubscriptWrapper.prototype.constructor=eqEd.SubscriptWrapper,eqEd.SubscriptWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper subscriptWrapper"></div>')},eqEd.SubscriptWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.subscriptContainer=this.subscriptContainer.clone(),a.subscriptContainer.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.subscriptContainer.domObj),a.childContainers=[a.subscriptContainer],a},eqEd.SubscriptWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{subscript:this.subscriptContainer.buildJsonObj()}};return a},eqEd.SubscriptWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.SubscriptWrapper(b);for(d=0;d<a.operands.subscript.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.subscript[d].type),f=e.constructFromJsonObj(a.operands.subscript[d],b),c.subscriptContainer.addWrappers([d,f]);return c}}(),eqEd.SubscriptContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.SubscriptContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),this.offsetTop=.75,c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var b,a=null;return 0!==this.parent.index?a=this.parent.parent.wrappers[this.parent.index-1]:(a=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),a.parent=this.parent.parent,a.index=0,a.update()),b=this.equation.fontMetrics.height[this.fontSize],this.parent.topAlign+a.bottomAlign-this.offsetTop*b},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){var c,a="",b=null;for(b=0!==this.parent.index?this.parent.parent.wrappers[this.parent.index-1]:null,c=this.parent.parent;c instanceof eqEd.BracketContainer;)c=c.parent.parent;return a="fontSizeSmaller"===c.fontSize||"fontSizeSmallest"===c.fontSize?"fontSizeSmallest":b instanceof eqEd.SubscriptWrapper||b instanceof eqEd.SuperscriptAndSubscriptWrapper?"fontSizeSmallest":"fontSizeSmaller"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.SubscriptContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.SubscriptContainer.prototype.constructor=eqEd.SubscriptContainer,eqEd.SubscriptContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer subscriptContainer"></div>')}}(),eqEd.SuperscriptAndSubscriptWrapper=function(a){var b,c,d,e;eqEd.Wrapper.call(this,a),this.className="eqEd.SuperscriptAndSubscriptWrapper",this.superscriptContainer=new eqEd.SuperscriptContainer(this),this.subscriptContainer=new eqEd.SubscriptContainer(this),this.subscriptContainer.offsetTop=.45,this.domObj=this.buildDomObj(),this.domObj.append(this.superscriptContainer.domObj),this.domObj.append(this.subscriptContainer.domObj),this.childContainers=[this.superscriptContainer,this.subscriptContainer],b=0,this.properties.push(new Property(this,"padRight",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=.05;return 0!==this.index&&this.parent.wrappers[this.index-1]instanceof eqEd.FunctionWrapper&&(a=this.parent.wrappers[this.index+1]instanceof eqEd.BracketWrapper||this.parent.wrappers[this.index+1]instanceof eqEd.BracketPairWrapper?.05:.175),a},updateDom:function(){}})),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.superscriptContainer.width>this.subscriptContainer.width?this.superscriptContainer.width:this.subscriptContainer.width;return a},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"topAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var d,e,f,g,h,i,j,k,l,a=this.equation.fontMetrics.height[this.parent.fontSize],b=null;if(0!==this.index)b=this.parent.wrappers[this.index-1];else for(b=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),b.parent=this.parent,b.index=0,d=0;d<b.properties.length;d++)e=b.properties[d],"top"!==e.propName&&"left"!==e.propName&&e.compute();return f=0,g=0,h=0,0!==this.superscriptContainer.wrappers.length&&(g=this.superscriptContainer.wrappers[this.superscriptContainer.maxTopAlignIndex].topAlign,h=this.superscriptContainer.wrappers[this.superscriptContainer.maxBottomAlignIndex].bottomAlign),b instanceof eqEd.NthRootWrapper?f=b.nthRootDegreeContainer.isLeftFlushToWrapper?b.nthRootDiagonal.height+g-b.bottomAlign:b.topAlign+g:b instanceof eqEd.SquareRootWrapper?f=b.topAlign+g:b instanceof eqEd.SuperscriptWrapper||b instanceof eqEd.SuperscriptAndSubscriptWrapper?(i=b.superscriptContainer,j=0,0!==i.wrappers.length&&(j=i.wrappers[i.maxTopAlignIndex].topAlign),k=.15,l=.75,f=h+k*a>l*i.height?b.topAlign+(this.superscriptContainer.height-l*i.height):b.topAlign+g-k*a):(k=.3,l=.625,f=h+k*a>l*b.height?b.topAlign+(this.superscriptContainer.height-l*b.height):b.topAlign+g-k*a),f},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"bottomAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var c,d,e,a=null,b=null;if(0!==this.index)a=this.parent.wrappers[this.index-1],b=a instanceof eqEd.SubscriptWrapper?a.subscriptContainer:a;else{for(a=new eqEd.SymbolWrapper(this.equation,"a","MathJax_MathItalic"),a.index=0,a.parent=this.parent,c=0;c<a.properties.length;c++)d=a.properties[c],"top"!==d.propName&&"left"!==d.propName&&d.compute();b=a}return e=this.equation.fontMetrics.height[this.subscriptContainer.fontSize],this.subscriptContainer.height+a.bottomAlign-this.subscriptContainer.offsetTop*e},updateDom:function(){}}))},function(){eqEd.SuperscriptAndSubscriptWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.SuperscriptAndSubscriptWrapper.prototype.constructor=eqEd.SuperscriptAndSubscriptWrapper,eqEd.SuperscriptAndSubscriptWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper superscriptAndSubscriptWrapper"></div>')},eqEd.SuperscriptAndSubscriptWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.superscriptContainer=this.superscriptContainer.clone(),a.superscriptContainer.parent=a,a.subscriptContainer=this.subscriptContainer.clone(),a.subscriptContainer.parent=a,a.subscriptContainer.offsetTop=.45,a.domObj=a.buildDomObj(),a.domObj.append(a.superscriptContainer.domObj),a.domObj.append(a.subscriptContainer.domObj),a.childContainers=[a.superscriptContainer,a.subscriptContainer],a},eqEd.SuperscriptAndSubscriptWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{superscript:this.superscriptContainer.buildJsonObj(),subscript:this.subscriptContainer.buildJsonObj()}};return a},eqEd.SuperscriptAndSubscriptWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.SuperscriptAndSubscriptWrapper(b);for(d=0;d<a.operands.superscript.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.superscript[d].type),f=e.constructFromJsonObj(a.operands.superscript[d],b),c.superscriptContainer.addWrappers([d,f]);for(d=0;d<a.operands.subscript.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.subscript[d].type),f=e.constructFromJsonObj(a.operands.subscript[d],b),c.subscriptContainer.addWrappers([d,f]);return c}}(),eqEd.SquareRootWrapper=function(a){var b,c,d,e;eqEd.Wrapper.call(this,a),this.className="eqEd.SquareRootWrapper",this.domObj=this.buildDomObj(),this.radicandContainer=new eqEd.SquareRootRadicandContainer(this),this.squareRootOverBar=new eqEd.SquareRootOverBar(this),this.radical=new eqEd.SquareRootRadical(this),this.squareRootDiagonal=new eqEd.SquareRootDiagonal(this),this.domObj.append(this.radicandContainer.domObj),this.domObj.append(this.squareRootOverBar.domObj),this.domObj.append(this.radical.domObj),this.domObj.append(this.squareRootDiagonal.domObj),this.childContainers=[this.radicandContainer],this.childNoncontainers=[this.squareRootDiagonal,this.radical,this.squareRootOverBar],this.padLeft=.1,this.padRight=.1,b=0,this.properties.push(new Property(this,"padBottom",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0;return this.parent instanceof eqEd.StackedFractionNumeratorContainer&&(a=.2),a},updateDom:function(){}})),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.radical.width+this.squareRootDiagonal.width+this.radicandContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"topAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize],b=0;return this.radicandContainer.wrappers.length>0&&(b+=this.radicandContainer.wrappers[this.radicandContainer.maxTopAlignIndex].topAlign),b+=this.radicandContainer.isMaxTopAlignRootWrapper?this.radicandContainer.padTopMaxChildAlignTopIsRoot*a:this.radicandContainer.padTopMaxChildAlignTopIsNotRoot*a},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"bottomAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize],b=0;return this.radicandContainer.wrappers.length>0&&(b+=this.radicandContainer.wrappers[this.radicandContainer.maxBottomAlignIndex].bottomAlign),b+=this.radicandContainer.isMaxTopAlignRootWrapper?this.radicandContainer.padBottomMaxChildAlignTopIsRoot*a:this.radicandContainer.padBottomMaxChildAlignTopIsNotRoot*a},updateDom:function(){}}))},function(){eqEd.SquareRootWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.SquareRootWrapper.prototype.constructor=eqEd.SquareRootWrapper,eqEd.SquareRootWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper squareRootWrapper"></div>')},eqEd.SquareRootWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.domObj=a.buildDomObj(),a.radicandContainer=this.radicandContainer.clone(),a.radicandContainer.parent=a,a.squareRootOverBar=this.squareRootOverBar.clone(),a.squareRootOverBar.parent=a,a.radical=this.radical.clone(),a.radical.parent=a,a.squareRootDiagonal=this.squareRootDiagonal.clone(),a.squareRootDiagonal.parent=a,a.domObj.append(a.radicandContainer.domObj),a.domObj.append(a.squareRootOverBar.domObj),a.domObj.append(a.radical.domObj),a.domObj.append(a.squareRootDiagonal.domObj),a.childContainers=[a.radicandContainer],a.childNoncontainers=[a.squareRootDiagonal,a.radical,a.squareRootOverBar],a
},eqEd.SquareRootWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{radicand:this.radicandContainer.buildJsonObj()}};return a},eqEd.SquareRootWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.SquareRootWrapper(b);for(d=0;d<a.operands.radicand.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.radicand[d].type),f=e.constructFromJsonObj(a.operands.radicand[d],b),c.radicandContainer.addWrappers([d,f]);return c}}(),eqEd.SquareRootOverBar=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.SquareRootOverBar",this.domObj=this.buildDomObj(),this.adjustLeft=-.06,this.heightRatio=.055,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return this.parent.radicandContainer.width-this.adjustLeft*a},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height["fontSizeNormal"];return this.heightRatio*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.parent.radical.width+this.parent.squareRootDiagonal.width},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.SquareRootOverBar.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.SquareRootOverBar.prototype.constructor=eqEd.SquareRootOverBar,eqEd.SquareRootOverBar.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="squareRootOverBar"></div>')}}(),eqEd.SquareRootRadical=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.SquareRootRadical",this.domObj=this.buildDomObj(),b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return b=this.parent.squareRootDiagonal.height<2*a?.4*a:.5*a},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return b=this.parent.squareRootDiagonal.height<2*a?.7*a:.75*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return this.parent.squareRootDiagonal.height-this.height},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.SquareRootRadical.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.SquareRootRadical.prototype.constructor=eqEd.SquareRootRadical,eqEd.SquareRootRadical.prototype.buildDomObj=function(){var a='<div class="squareRootRadical" style="width: 74.842293px; height: 127.48769px;"><svg style="position: absolute; width: 100%; height: 100%;" viewBox="0 0 74.842293 127.48769" preserveAspectRatio="none"><defs id="defs4"><clipPath clipPathUnits="userSpaceOnUse" id="clipPath3765"><rect style="fill:#b1ded2;fill-opacity:1;stroke:none" id="rect3767" width="74.842293" height="127.62585" x="198.84776" y="668.99451" /></clipPath></defs><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-198.84776,-668.99451)"><g clip-path="url(#clipPath3765)"><path d="m 265.30006,796.48219 -47.75994,-111.23309 -14.88621,11.47479 -3.82493,-3.82493 30.28931,-23.46646 44.65864,103.89336 109.8892,-228.9789 c 0.68896,-1.30943 1.89502,-1.96414 3.61817,-1.96415 1.17139,1e-5 2.17069,0.41351 2.99792,1.24052 0.8268,0.82701 1.2403,1.82632 1.24052,2.99791 -2.2e-4,0.68918 -0.0691,1.17161 -0.20676,1.44728 L 273.15667,794.51804 c -0.55144,1.30919 -1.61966,1.96391 -3.20467,1.96415 l -4.65194,0" style="" id="path2987" /></g></g></svg></div>';return new eqEd.EquationDom(this,a)}}(),eqEd.SquareRootDiagonal=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.SquareRootDiagonal",this.domObj=this.buildDomObj(),this.adjustLeft=-.035,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return.58*a+.05*this.height},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radicandContainer.height;return b+=this.parent.radicandContainer.isMaxTopAlignRootWrapper?(this.parent.radicandContainer.padTopMaxChildAlignTopIsRoot+this.parent.radicandContainer.padBottomMaxChildAlignTopIsRoot)*a:(this.parent.radicandContainer.padTopMaxChildAlignTopIsNotRoot+this.parent.radicandContainer.padBottomMaxChildAlignTopIsNotRoot)*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.parent.radical.width},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.SquareRootDiagonal.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.SquareRootDiagonal.prototype.constructor=eqEd.SquareRootDiagonal,eqEd.SquareRootDiagonal.prototype.buildDomObj=function(){var a='<div class="squareRootDiagonal" style="width: 130.0331px; height: 256.45282px;"><svg style="position: absolute; width: 100%; height: 100%;" viewBox="0 0 130.0331 256.45282" preserveAspectRatio="none"><g transform="translate(-391.39675,-547.35338)"><g transform="scale(1.1433177,0.87464752)" style="font-size:162.99891663px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:cmex10;-inkscape-font-specification:cmex10" id="text2989"><path d="m 342.3342,915.58351 0,-0.95508 c 0.053,-0.1064 0.0796,-0.21252 0.0796,-0.31835 0.053,-0.1064 0.0796,-0.21252 0.0796,-0.31836 L 448.42675,628.42526 c 0.42437,-1.37954 1.51208,-2.25503 3.26317,-2.62645 l 0.95507,0 c 1.75084,0.31836 2.89162,1.45914 3.42234,3.42234 l 0,0.95507 c -1.2e-4,0.10612 -0.0267,0.23877 -0.0796,0.39795 -1.2e-4,0.10612 -0.0266,0.21224 -0.0796,0.31836 L 349.97477,916.45899 c -0.42449,1.3262 -1.51221,2.17515 -3.26316,2.54686 l -0.95507,0 c -1.75098,-0.31865 -2.89176,-1.45943 -3.42234,-3.42234" style="" id="path2987" /></g></g></svg></div>';return new eqEd.EquationDom(this,a)}}(),eqEd.SquareRootRadicandContainer=function(a){var b,c,d,e,f;eqEd.Container.call(this,a),this.className="eqEd.SquareRootRadicandContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),this.padTopMaxChildAlignTopIsRoot=.45,this.padTopMaxChildAlignTopIsNotRoot=.15,this.padBottomMaxChildAlignTopIsRoot=.2,this.padBottomMaxChildAlignTopIsNotRoot=0,c=!1,this.properties.push(new Property(this,"isMaxTopAlignRootWrapper",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.wrappers[this.maxTopAlignIndex];return a instanceof eqEd.SquareRootWrapper||a instanceof eqEd.NthRootWrapper},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.parent.radical.width+this.parent.squareRootDiagonal.width},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return b+=this.isMaxTopAlignRootWrapper?this.padTopMaxChildAlignTopIsRoot*a:this.padTopMaxChildAlignTopIsNotRoot*a},updateDom:function(){this.domObj.updateTop(this.top)}})),f="",this.properties.push(new Property(this,"fontSize",f,{get:function(){return f},set:function(a){f=a},compute:function(){for(var a=this.parent.parent;a instanceof eqEd.BracketContainer;)a=a.parent.parent;return a.fontSize},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.SquareRootRadicandContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.SquareRootRadicandContainer.prototype.constructor=eqEd.SquareRootRadicandContainer,eqEd.SquareRootRadicandContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer squareRootRadicandContainer"></div>')}}(),eqEd.NthRootWrapper=function(a){var b,c,d,e;eqEd.Wrapper.call(this,a),this.className="eqEd.NthRootWrapper",this.domObj=this.buildDomObj(),this.radicandContainer=new eqEd.NthRootRadicandContainer(this),this.nthRootOverBar=new eqEd.NthRootOverBar(this),this.radical=new eqEd.NthRootRadical(this),this.nthRootDiagonal=new eqEd.NthRootDiagonal(this),this.nthRootDegreeContainer=new eqEd.NthRootDegreeContainer(this),this.domObj.append(this.nthRootDegreeContainer.domObj),this.domObj.append(this.radicandContainer.domObj),this.domObj.append(this.nthRootOverBar.domObj),this.domObj.append(this.radical.domObj),this.domObj.append(this.nthRootDiagonal.domObj),this.childContainers=[this.nthRootDegreeContainer,this.radicandContainer],this.childNoncontainers=[this.nthRootDiagonal,this.radical,this.nthRootOverBar],this.padBottomWhenParentIsFraction=.2,this.padLeft=.1,this.padRight=.1,b=0,this.properties.push(new Property(this,"padBottom",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0;return this.parent instanceof eqEd.StackedFractionNumeratorContainer&&(a=.2),a},updateDom:function(){}})),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize],b=this.radical.width+this.nthRootDiagonal.width+this.radicandContainer.width;return this.nthRootDegreeContainer.isLeftFlushToWrapper&&(b+=this.nthRootDegreeContainer.width-this.nthRootDegreeContainer.offsetRadicalRight*a+this.nthRootDegreeContainer.diagonalHeightAdjustment*this.nthRootDiagonal.height-this.radical.width),b},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"topAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize],b=0;return this.radicandContainer.wrappers.length>0&&(b+=this.radicandContainer.wrappers[this.radicandContainer.maxTopAlignIndex].topAlign),b+=this.radicandContainer.isMaxTopAlignRootWrapper?this.radicandContainer.padTopMaxChildAlignTopIsRoot*a:this.radicandContainer.padTopMaxChildAlignTopIsNotRoot*a,this.nthRootDegreeContainer.isTopFlushToWrapper&&(b+=this.nthRootDegreeContainer.height+this.radical.height+this.nthRootDegreeContainer.offsetRadicalBottom*a-this.nthRootDiagonal.height),b},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"bottomAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize],b=0;return this.radicandContainer.wrappers.length>0&&(b+=this.radicandContainer.wrappers[this.radicandContainer.maxBottomAlignIndex].bottomAlign),b+=this.radicandContainer.isMaxTopAlignRootWrapper?this.radicandContainer.padBottomMaxChildAlignTopIsRoot*a:this.radicandContainer.padBottomMaxChildAlignTopIsNotRoot*a},updateDom:function(){}}))},function(){eqEd.NthRootWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.NthRootWrapper.prototype.constructor=eqEd.NthRootWrapper,eqEd.NthRootWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper nthRootWrapper"></div>')},eqEd.NthRootWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.domObj=a.buildDomObj(),a.radicandContainer=this.radicandContainer.clone(),a.radicandContainer.parent=a,a.nthRootOverBar=this.nthRootOverBar.clone(),a.nthRootOverBar.parent=a,a.radical=this.radical.clone(),a.radical.parent=a,a.nthRootDiagonal=this.nthRootDiagonal.clone(),a.nthRootDiagonal.parent=a,a.nthRootDegreeContainer=this.nthRootDegreeContainer.clone(),a.nthRootDegreeContainer.parent=a,a.domObj.append(a.radicandContainer.domObj),a.domObj.append(a.nthRootOverBar.domObj),a.domObj.append(a.radical.domObj),a.domObj.append(a.nthRootDiagonal.domObj),a.domObj.append(a.nthRootDegreeContainer.domObj),a.childContainers=[a.radicandContainer,a.nthRootDegreeContainer],a.childNoncontainers=[a.nthRootDiagonal,a.radical,a.nthRootOverBar],a},eqEd.NthRootWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{radicand:this.radicandContainer.buildJsonObj(),degree:this.nthRootDegreeContainer.buildJsonObj()}};return a},eqEd.NthRootWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.NthRootWrapper(b);for(d=0;d<a.operands.radicand.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.radicand[d].type),f=e.constructFromJsonObj(a.operands.radicand[d],b),c.radicandContainer.addWrappers([d,f]);for(d=0;d<a.operands.degree.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.degree[d].type),f=e.constructFromJsonObj(a.operands.degree[d],b),c.nthRootDegreeContainer.addWrappers([d,f]);return c}}(),eqEd.NthRootOverBar=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.NthRootOverBar",this.domObj=this.buildDomObj(),this.adjustLeft=-.06,this.heightRatio=.055,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return this.parent.radicandContainer.width-this.adjustLeft*a},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height["fontSizeNormal"];return this.heightRatio*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radical.width+this.parent.nthRootDiagonal.width;return this.parent.nthRootDegreeContainer.isLeftFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.width-this.parent.nthRootDegreeContainer.offsetRadicalRight*a+this.parent.nthRootDegreeContainer.diagonalHeightAdjustment*this.parent.nthRootDiagonal.height-this.parent.radical.width),b},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return this.parent.nthRootDegreeContainer.isTopFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.height+this.parent.radical.height+this.parent.nthRootDegreeContainer.offsetRadicalBottom*a-this.parent.nthRootDiagonal.height),b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.NthRootOverBar.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.NthRootOverBar.prototype.constructor=eqEd.NthRootOverBar,eqEd.NthRootOverBar.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="nthRootOverBar"></div>')}}(),eqEd.NthRootRadical=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.NthRootRadical",this.domObj=this.buildDomObj(),b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return b=this.parent.nthRootDiagonal.height<2*a?.4*a:.5*a},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return b=this.parent.nthRootDiagonal.height<2*a?.7*a:.75*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return this.parent.nthRootDegreeContainer.isLeftFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.width-this.parent.nthRootDegreeContainer.offsetRadicalRight*a+this.parent.nthRootDegreeContainer.diagonalHeightAdjustment*this.parent.nthRootDiagonal.height-this.parent.radical.width),b},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.nthRootDiagonal.height-this.height;return this.parent.nthRootDegreeContainer.isTopFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.height+this.parent.radical.height+this.parent.nthRootDegreeContainer.offsetRadicalBottom*a-this.parent.nthRootDiagonal.height),b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.NthRootRadical.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.NthRootRadical.prototype.constructor=eqEd.NthRootRadical,eqEd.NthRootRadical.prototype.buildDomObj=function(){var a='<div class="nthRootRadical" style="width: 74.842293px; height: 127.48769px;"><svg style="position: absolute; width: 100%; height: 100%;" viewBox="0 0 74.842293 127.48769" preserveAspectRatio="none"><defs id="defs4"><clipPath clipPathUnits="userSpaceOnUse" id="clipPath3765"><rect style="fill:#b1ded2;fill-opacity:1;stroke:none" id="rect3767" width="74.842293" height="127.62585" x="198.84776" y="668.99451" /></clipPath></defs><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-198.84776,-668.99451)"><g clip-path="url(#clipPath3765)"><path d="m 265.30006,796.48219 -47.75994,-111.23309 -14.88621,11.47479 -3.82493,-3.82493 30.28931,-23.46646 44.65864,103.89336 109.8892,-228.9789 c 0.68896,-1.30943 1.89502,-1.96414 3.61817,-1.96415 1.17139,1e-5 2.17069,0.41351 2.99792,1.24052 0.8268,0.82701 1.2403,1.82632 1.24052,2.99791 -2.2e-4,0.68918 -0.0691,1.17161 -0.20676,1.44728 L 273.15667,794.51804 c -0.55144,1.30919 -1.61966,1.96391 -3.20467,1.96415 l -4.65194,0" style="" id="path2987" /></g></g></svg></div>';return new eqEd.EquationDom(this,a)}}(),eqEd.NthRootDiagonal=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.NthRootDiagonal",this.domObj=this.buildDomObj(),this.adjustLeft=-.035,b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return.58*a+.05*this.height},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radicandContainer.height;return b+=this.parent.radicandContainer.isMaxTopAlignRootWrapper?(this.parent.radicandContainer.padTopMaxChildAlignTopIsRoot+this.parent.radicandContainer.padBottomMaxChildAlignTopIsRoot)*a:(this.parent.radicandContainer.padTopMaxChildAlignTopIsNotRoot+this.parent.radicandContainer.padBottomMaxChildAlignTopIsNotRoot)*a},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radical.width;return this.parent.nthRootDegreeContainer.isLeftFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.width-this.parent.nthRootDegreeContainer.offsetRadicalRight*a+this.parent.nthRootDegreeContainer.diagonalHeightAdjustment*this.parent.nthRootDiagonal.height-this.parent.radical.width),b},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return this.parent.nthRootDegreeContainer.isTopFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.height+this.parent.radical.height+this.parent.nthRootDegreeContainer.offsetRadicalBottom*a-this.height),b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.NthRootDiagonal.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.NthRootDiagonal.prototype.constructor=eqEd.NthRootDiagonal,eqEd.NthRootDiagonal.prototype.buildDomObj=function(){var a='<div class="nthRootDiagonal" style="width: 130.0331px; height: 256.45282px;"><svg style="position: absolute; width: 100%; height: 100%;" viewBox="0 0 130.0331 256.45282" preserveAspectRatio="none"><g transform="translate(-391.39675,-547.35338)"><g transform="scale(1.1433177,0.87464752)" style="font-size:162.99891663px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:cmex10;-inkscape-font-specification:cmex10" id="text2989"><path d="m 342.3342,915.58351 0,-0.95508 c 0.053,-0.1064 0.0796,-0.21252 0.0796,-0.31835 0.053,-0.1064 0.0796,-0.21252 0.0796,-0.31836 L 448.42675,628.42526 c 0.42437,-1.37954 1.51208,-2.25503 3.26317,-2.62645 l 0.95507,0 c 1.75084,0.31836 2.89162,1.45914 3.42234,3.42234 l 0,0.95507 c -1.2e-4,0.10612 -0.0267,0.23877 -0.0796,0.39795 -1.2e-4,0.10612 -0.0266,0.21224 -0.0796,0.31836 L 349.97477,916.45899 c -0.42449,1.3262 -1.51221,2.17515 -3.26316,2.54686 l -0.95507,0 c -1.75098,-0.31865 -2.89176,-1.45943 -3.42234,-3.42234" style="" id="path2987" /></g></g></svg></div>';return new eqEd.EquationDom(this,a)}}(),eqEd.NthRootRadicandContainer=function(a){var b,c,d,e,f;eqEd.Container.call(this,a),this.className="eqEd.NthRootRadicandContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),this.padTopMaxChildAlignTopIsRoot=.45,this.padTopMaxChildAlignTopIsNotRoot=.15,this.padBottomMaxChildAlignTopIsRoot=.2,this.padBottomMaxChildAlignTopIsNotRoot=0,c=!1,this.properties.push(new Property(this,"isMaxTopAlignRootWrapper",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.wrappers[this.maxTopAlignIndex];return a instanceof eqEd.SquareRootWrapper||a instanceof eqEd.NthRootWrapper},updateDom:function(){}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radical.width+this.parent.nthRootDiagonal.width;return this.parent.nthRootDegreeContainer.isLeftFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.width-this.parent.nthRootDegreeContainer.offsetRadicalRight*a+this.parent.nthRootDegreeContainer.diagonalHeightAdjustment*this.parent.nthRootDiagonal.height-this.parent.radical.width),b},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return b+=this.isMaxTopAlignRootWrapper?this.padTopMaxChildAlignTopIsRoot*a:this.padTopMaxChildAlignTopIsNotRoot*a,this.parent.nthRootDegreeContainer.isTopFlushToWrapper&&(b+=this.parent.nthRootDegreeContainer.height+this.parent.radical.height+this.parent.nthRootDegreeContainer.offsetRadicalBottom*a-this.parent.nthRootDiagonal.height),b},updateDom:function(){this.domObj.updateTop(this.top)}})),f="",this.properties.push(new Property(this,"fontSize",f,{get:function(){return f},set:function(a){f=a},compute:function(){for(var a=this.parent.parent;a instanceof eqEd.BracketContainer;)a=a.parent.parent;return a.fontSize},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.NthRootRadicandContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.NthRootRadicandContainer.prototype.constructor=eqEd.NthRootRadicandContainer,eqEd.NthRootRadicandContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer nthRootRadicandContainer"></div>')}}(),eqEd.NthRootDegreeContainer=function(a){var b,c,d,e,f,g;eqEd.Container.call(this,a),this.className="eqEd.NthRootDegreeContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),this.offsetRadicalBottom=-.1,this.offsetRadicalRight=.3,this.diagonalHeightAdjustment=.048,c=!1,this.properties.push(new Property(this,"isLeftFlushToWrapper",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radicandContainer.height,c=!0;return this.width-this.offsetRadicalRight*a+this.diagonalHeightAdjustment*b<this.parent.radical.width&&(c=!1),c},updateDom:function(){}})),d=!1,this.properties.push(new Property(this,"isTopFlushToWrapper",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=this.parent.radicandContainer.height,c=!1;return b-(this.parent.radical.height+this.offsetRadicalBottom*a)<this.height&&(c=!0),c},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return this.isLeftFlushToWrapper||(b+=this.parent.radical.width-(this.width-this.offsetRadicalRight*a+this.diagonalHeightAdjustment*this.parent.nthRootDiagonal.height)),b},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return this.isTopFlushToWrapper||(b+=this.parent.nthRootDiagonal.height-this.parent.radical.height-this.offsetRadicalBottom*a-this.height),b},updateDom:function(){this.domObj.updateTop(this.top)}})),g="",this.properties.push(new Property(this,"fontSize",g,{get:function(){return g},set:function(a){g=a},compute:function(){return"fontSizeSmallest"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.NthRootDegreeContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.NthRootDegreeContainer.prototype.constructor=eqEd.NthRootDegreeContainer,eqEd.NthRootDegreeContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer nthRootDegreeContainer"></div>')}}(),eqEd.BracketWrapper=function(a,b){var c,d,e,f;eqEd.Wrapper.call(this,a),this.className="eqEd.BracketWrapper",this.bracketType=b,c={leftParenthesisBracket:eqEd.LeftParenthesisBracket,rightParenthesisBracket:eqEd.RightParenthesisBracket,leftSquareBracket:eqEd.LeftSquareBracket,rightSquareBracket:eqEd.RightSquareBracket,leftCurlyBracket:eqEd.LeftCurlyBracket,rightCurlyBracket:eqEd.RightCurlyBracket,leftAngleBracket:eqEd.LeftAngleBracket,rightAngleBracket:eqEd.RightAngleBracket,leftFloorBracket:eqEd.LeftFloorBracket,rightFloorBracket:eqEd.RightFloorBracket,leftCeilBracket:eqEd.LeftCeilBracket,rightCeilBracket:eqEd.RightCeilBracket},this.domObj=this.buildDomObj(),this.bracket=new c[b](this),this.domObj.append(this.bracket.domObj),this.childNoncontainers=[this.bracket],this.padTop=.05,this.padBottom=.15,d=0,this.properties.push(new Property(this,"width",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.bracket.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),e=0,this.properties.push(new Property(this,"topAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=0;return a=this.bracket.heightRatio<=1.5?.525*this.bracket.height:.5*this.bracket.height},updateDom:function(){}})),f=0,this.properties.push(new Property(this,"bottomAlign",f,{get:function(){return f},set:function(a){f=a},compute:function(){var a=0;return a=this.bracket.heightRatio<=1.5?.475*this.bracket.height:.5*this.bracket.height},updateDom:function(){}}))},function(){eqEd.BracketWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.BracketWrapper.prototype.constructor=eqEd.BracketWrapper,eqEd.BracketWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper bracketWrapper '+this.bracketType+'"></div>')},eqEd.BracketWrapper.prototype.clone=function(){var a=new this.constructor(this.equation,this.bracketType);return a},eqEd.BracketWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:this.bracketType,operands:null};return a},eqEd.BracketWrapper.constructFromJsonObj=function(a,b){var c=new eqEd.BracketWrapper(b,a.value);return c}}(),eqEd.Bracket=function(a){var b,c,d;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.Bracket",this.adjustTop=IEVersion>=9?.28:.025,b=0,this.properties.push(new Property(this,"heightRatio",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return this.desiredHeight/a},updateDom:function(){this.updateBracketStructure()}})),c=0,this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var b,c,a=0;return this.parent instanceof eqEd.BracketPairWrapper&&this.parent.bracketContainer.wrappers.length>0&&(b=this.parent.bracketContainer.wrappers[this.parent.bracketContainer.maxTopAlignIndex].topAlign,c=.5*this.height,b>c&&(a=b-c)),a},updateDom:function(){this.domObj.updateTop(this.top)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=0;return this.parent instanceof eqEd.BracketPairWrapper&&this instanceof eqEd.RightBracket&&(a=this.parent.leftBracket.width+this.parent.bracketContainer.width),a},updateDom:function(){this.domObj.updateLeft(this.left)}}))},function(){eqEd.Bracket.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.Bracket.prototype.constructor=eqEd.Bracket,eqEd.Bracket.prototype.clone=function(){var b,c,a=new this.constructor(this.parent);for(a.domObj=a.buildDomObj(),null!==this.wholeBracket?(a.wholeBracket=this.wholeBracket.clone(),a.wholeBracket.parent=a,a.domObj.append(a.wholeBracket.domObj),a.children.push(a.wholeBracket)):a.wholeBracket=null,null!==this.topBracket?(a.topBracket=this.topBracket.clone(),a.topBracket.parent=a,a.domObj.append(a.topBracket.domObj),a.children.push(a.topBracket)):a.topBracket=null,a.middleBrackets=[],b=0;b<this.middleBrackets.length;b++)c=this.middleBrackets[b].clone(),c.parent=a,a.domObj.append(c.domObj),a.middleBrackets.push(c),a.children.push(a.middleBracket);
return null!==this.bottomBracket?(a.bottomBracket=this.bottomBracket.clone(),a.bottomBracket.parent=a,a.domObj.append(a.bottomBracket.domObj),a.children.push(a.bottomBracket)):a.bottomBracket=null,this.childNoncontainers=[this.wholeBracket],a}}(),eqEd.WholeBracket=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.WholeBracket",b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.WholeBracket.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.WholeBracket.prototype.constructor=eqEd.WholeBracket,eqEd.WholeBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="wholeBracket '+this.fontStyle+'">'+this.character+"</div>")},eqEd.WholeBracket.prototype.clone=function(){var a=new this.constructor(this.parent);return a}}(),eqEd.TopBracket=function(a){var b,c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.TopBracket",b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.TopBracket.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.TopBracket.prototype.constructor=eqEd.TopBracket,eqEd.TopBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="topBracket '+this.fontStyle+'">'+this.character+"</div>")},eqEd.TopBracket.prototype.clone=function(){var a=new this.constructor(this.parent);return a}}(),eqEd.MiddleBracket=function(a,b){var c,d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.MiddleBracket",this.index=b,c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}}))},function(){eqEd.MiddleBracket.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.MiddleBracket.prototype.constructor=eqEd.MiddleBracket,eqEd.MiddleBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="middleBracket '+this.fontStyle+'">'+this.character+"</div>")},eqEd.MiddleBracket.prototype.clone=function(){var a=new this.constructor(this.parent,this.index);return a}}(),eqEd.BottomBracket=function(a){var b,c,d;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.BottomBracket",b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}}))},function(){eqEd.BottomBracket.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.BottomBracket.prototype.constructor=eqEd.BottomBracket,eqEd.BottomBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bottomBracket '+this.fontStyle+'">'+this.character+"</div>")},eqEd.BottomBracket.prototype.clone=function(){var a=new this.constructor(this.parent);return a}}(),eqEd.LeftBracket=function(a){eqEd.Bracket.call(this,a),this.className="eqEd.LeftBracket";var b=0;this.properties.push(new Property(this,"desiredHeight",b,{get:function(){return b},set:function(a){b=a},compute:function(){var b,c,d,e,f,g,h,a=0;if(this.parent instanceof eqEd.BracketWrapper){for(b=0,c=null,d=0,e=0,f=this.parent.index+1;f<this.parent.parent.wrappers.length;f++)if(g=this.parent.parent.wrappers[f],g instanceof eqEd.BracketWrapper)if(g.bracket instanceof this.constructor)b++;else{if(g.bracket instanceof this.matchingBracketCtor&&0===b){c=f;break}g.bracket instanceof this.matchingBracketCtor&&b--}else d=g.topAlign>d?g.topAlign:d,e=g.bottomAlign>e?g.bottomAlign:e;null===c||0===d&&0===e?(h=this.equation.fontMetrics.height[this.parent.parent.fontSize],a=h):a=d>e?2*d:2*e}else this.parent instanceof eqEd.BracketPairWrapper&&this.parent.bracketContainer.wrappers.length>0&&(d=this.parent.bracketContainer.wrappers[this.parent.bracketContainer.maxTopAlignIndex].topAlign,e=this.parent.bracketContainer.wrappers[this.parent.bracketContainer.maxBottomAlignIndex].bottomAlign,a=d>e?2*d:2*e);return a},updateDom:function(){}}))},function(){eqEd.LeftBracket.prototype=Object.create(eqEd.Bracket.prototype),eqEd.LeftBracket.prototype.constructor=eqEd.LeftBracket}(),eqEd.RightBracket=function(a){eqEd.Bracket.call(this,a),this.className="eqEd.RightBracket";var b=0;this.properties.push(new Property(this,"desiredHeight",b,{get:function(){return b},set:function(a){b=a},compute:function(){var b,c,d,e,f,g,h,a=0;if(this.parent instanceof eqEd.BracketWrapper){for(b=0,c=null,d=0,e=0,f=this.parent.index-1;f>=0;f--)if(g=this.parent.parent.wrappers[f],g instanceof eqEd.BracketWrapper)if(g.bracket instanceof this.constructor)b++;else{if(g.bracket instanceof this.matchingBracketCtor&&0===b){c=f;break}g.bracket instanceof this.matchingBracketCtor&&b--}else d=g.topAlign>d?g.topAlign:d,e=g.bottomAlign>e?g.bottomAlign:e;null===c||0===d&&0===e?(h=this.equation.fontMetrics.height[this.parent.parent.fontSize],a=h):a=d>e?2*d:2*e}else this.parent instanceof eqEd.BracketPairWrapper&&this.parent.bracketContainer.wrappers.length>0&&(d=this.parent.bracketContainer.wrappers[this.parent.bracketContainer.maxTopAlignIndex].topAlign,e=this.parent.bracketContainer.wrappers[this.parent.bracketContainer.maxBottomAlignIndex].bottomAlign,a=d>e?2*d:2*e);return a},updateDom:function(){}}))},function(){eqEd.RightBracket.prototype=Object.create(eqEd.Bracket.prototype),eqEd.RightBracket.prototype.constructor=eqEd.RightBracket}(),eqEd.LeftParenthesisBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftParenthesisBracket",this.matchingBracketCtor=eqEd.RightParenthesisBracket,this.wholeBracket=new eqEd.LeftParenthesisWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.377777*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.733333*b:this.heightRatio>2.4&&this.heightRatio<=3?.777777*b:this.heightRatio>3&&this.heightRatio<=3.33?.88888*b:.88888*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:this.heightRatio>3&&this.heightRatio<=3.33?3.33*b:(3.9+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftParenthesisBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftParenthesisBracket.prototype.constructor=eqEd.LeftParenthesisBracket,eqEd.LeftParenthesisBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftParenthesisBracket"></div>')},eqEd.LeftParenthesisBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.LeftParenthesisWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.LeftParenthesisWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.LeftParenthesisWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>3&&this.heightRatio<=3.33)this.topBracket=new eqEd.LeftParenthesisTopBracket(this.parent),this.bottomBracket=new eqEd.LeftParenthesisBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),this.children=[this.topBracket,this.bottomBracket];else{for(a=Math.ceil((this.heightRatio-3.9)/.45)+1,this.topBracket=new eqEd.LeftParenthesisTopBracket(this.parent),this.bottomBracket=new eqEd.LeftParenthesisBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),b=0;a>b;b++)c=new eqEd.LeftParenthesisMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets).concat([this.bottomBracket])}}}(),eqEd.RightParenthesisBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightParenthesisBracket",this.matchingBracketCtor=eqEd.LeftParenthesisBracket,this.wholeBracket=new eqEd.RightParenthesisWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.377777*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.733333*b:this.heightRatio>2.4&&this.heightRatio<=3?.777777*b:this.heightRatio>3&&this.heightRatio<=3.33?.88888*b:.88888*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:this.heightRatio>3&&this.heightRatio<=3.33?3.33*b:(3.9+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightParenthesisBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightParenthesisBracket.prototype.constructor=eqEd.RightParenthesisBracket,eqEd.RightParenthesisBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightParenthesisBracket"></div>')},eqEd.RightParenthesisBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.RightParenthesisWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.RightParenthesisWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.RightParenthesisWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>3&&this.heightRatio<=3.33)this.topBracket=new eqEd.RightParenthesisTopBracket(this.parent),this.bottomBracket=new eqEd.RightParenthesisBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),this.children=[this.topBracket,this.bottomBracket];else{for(a=Math.ceil((this.heightRatio-3.9)/.45)+1,this.topBracket=new eqEd.RightParenthesisTopBracket(this.parent),this.bottomBracket=new eqEd.RightParenthesisBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),b=0;a>b;b++)c=new eqEd.RightParenthesisMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets).concat([this.bottomBracket])}}}(),eqEd.LeftParenthesisWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftParenthesisWholeBracket",this.character="(",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftParenthesisWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftParenthesisWholeBracket.prototype.constructor=eqEd.LeftParenthesisWholeBracket}(),eqEd.LeftParenthesisTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.LeftParenthesisTopBracket",this.character="⎛",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.4},function(){eqEd.LeftParenthesisTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.LeftParenthesisTopBracket.prototype.constructor=eqEd.LeftParenthesisTopBracket}(),eqEd.LeftParenthesisMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftParenthesisMiddleBracket",this.character="⎜",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index+1.5)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftParenthesisMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftParenthesisMiddleBracket.prototype.constructor=eqEd.LeftParenthesisMiddleBracket}(),eqEd.LeftParenthesisBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.LeftParenthesisBottomBracket",this.character="⎝",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=0;return b=0===this.parent.middleBrackets.length?1.939*a:(2.5+.45*(this.parent.middleBrackets.length-1))*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftParenthesisBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.LeftParenthesisBottomBracket.prototype.constructor=eqEd.LeftParenthesisBottomBracket}(),eqEd.RightParenthesisWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightParenthesisWholeBracket",this.character=")",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightParenthesisWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightParenthesisWholeBracket.prototype.constructor=eqEd.RightParenthesisWholeBracket}(),eqEd.RightParenthesisTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.RightParenthesisTopBracket",this.character="⎞",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.4},function(){eqEd.RightParenthesisTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.RightParenthesisTopBracket.prototype.constructor=eqEd.RightParenthesisTopBracket}(),eqEd.RightParenthesisMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightParenthesisMiddleBracket",this.character="⎟",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index+1.5)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightParenthesisMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightParenthesisMiddleBracket.prototype.constructor=eqEd.RightParenthesisMiddleBracket}(),eqEd.RightParenthesisBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.RightParenthesisBottomBracket",this.character="⎠",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=0;return b=0===this.parent.middleBrackets.length?1.939*a:(2.5+.45*(this.parent.middleBrackets.length-1))*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightParenthesisBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.RightParenthesisBottomBracket.prototype.constructor=eqEd.RightParenthesisBottomBracket}(),eqEd.LeftSquareBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftSquareBracket",this.matchingBracketCtor=eqEd.RightSquareBracket,this.wholeBracket=new eqEd.LeftSquareWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.288888*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.533333*b:this.heightRatio>2.4&&this.heightRatio<=3?.577777*b:.666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:(.6+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftSquareBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftSquareBracket.prototype.constructor=eqEd.LeftSquareBracket,eqEd.LeftSquareBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftSquareBracket"></div>')},eqEd.LeftSquareBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.LeftSquareWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.LeftSquareWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.LeftSquareWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.ceil((this.heightRatio-.6)/.45)+1,this.topBracket=new eqEd.LeftSquareTopBracket(this.parent),this.bottomBracket=new eqEd.LeftSquareBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),b=0;a>b;b++)c=new eqEd.LeftSquareMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets).concat([this.bottomBracket])}}}(),eqEd.LeftSquareWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftSquareWholeBracket",this.character="[",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftSquareWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftSquareWholeBracket.prototype.constructor=eqEd.LeftSquareWholeBracket}(),eqEd.LeftSquareTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.LeftSquareTopBracket",this.character="⎡",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.4},function(){eqEd.LeftSquareTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.LeftSquareTopBracket.prototype.constructor=eqEd.LeftSquareTopBracket}(),eqEd.LeftSquareMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftSquareMiddleBracket",this.character="⎢",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index-.15)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftSquareMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftSquareMiddleBracket.prototype.constructor=eqEd.LeftSquareMiddleBracket}(),eqEd.LeftSquareBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.LeftSquareBottomBracket",this.character="⎣",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=this.parent.middleBrackets[this.parent.middleBrackets.length-1].top-.65*a;return b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftSquareBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.LeftSquareBottomBracket.prototype.constructor=eqEd.LeftSquareBottomBracket}(),eqEd.RightSquareBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightSquareBracket",this.matchingBracketCtor=eqEd.LeftSquareBracket,this.wholeBracket=new eqEd.RightSquareWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.288888*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.533333*b:this.heightRatio>2.4&&this.heightRatio<=3?.577777*b:.666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:(.6+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightSquareBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightSquareBracket.prototype.constructor=eqEd.RightSquareBracket,eqEd.RightSquareBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightSquareBracket"></div>')},eqEd.RightSquareBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.RightSquareWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.RightSquareWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.RightSquareWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.ceil((this.heightRatio-.6)/.45)+1,this.topBracket=new eqEd.RightSquareTopBracket(this.parent),this.bottomBracket=new eqEd.RightSquareBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),b=0;a>b;b++)c=new eqEd.RightSquareMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets).concat([this.bottomBracket])}}}(),eqEd.RightSquareWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightSquareWholeBracket",this.character="]",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightSquareWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightSquareWholeBracket.prototype.constructor=eqEd.RightSquareWholeBracket}(),eqEd.RightSquareTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.RightSquareTopBracket",this.character="⎤",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.4},function(){eqEd.RightSquareTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.RightSquareTopBracket.prototype.constructor=eqEd.RightSquareTopBracket}(),eqEd.RightSquareMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightSquareMiddleBracket",this.character="⎥",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();
var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index-.15)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightSquareMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightSquareMiddleBracket.prototype.constructor=eqEd.RightSquareMiddleBracket}(),eqEd.RightSquareBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.RightSquareBottomBracket",this.character="⎦",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=this.parent.middleBrackets[this.parent.middleBrackets.length-1].top-.65*a;return b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightSquareBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.RightSquareBottomBracket.prototype.constructor=eqEd.RightSquareBottomBracket}(),eqEd.LeftCurlyBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftCurlyBracket",this.matchingBracketCtor=eqEd.RightCurlyBracket,this.wholeBracket=new eqEd.LeftCurlyWholeBracket(this.parent,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.511111*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.755555*b:this.heightRatio>2.4&&this.heightRatio<=3?.8*b:this.heightRatio>3&&this.heightRatio<=3.33?.666666*b:.888888*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var c,a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return this.heightRatio<=1.5?a=b:this.heightRatio>1.5&&this.heightRatio<=2.4?a=2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?a=3*b:this.heightRatio>3&&this.heightRatio<=3.33?a=3.33*b:(c=this.bottomBracket.top/b,a=(c+1.652778-this.padTop)*b),a},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftCurlyBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftCurlyBracket.prototype.constructor=eqEd.LeftCurlyBracket,eqEd.LeftCurlyBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftCurlyBracket"></div>')},eqEd.LeftCurlyBracket.prototype.updateBracketStructure=function(){var a,b,c,d;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.LeftCurlyWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.LeftCurlyWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.LeftCurlyWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.round((this.heightRatio-3.4)/.231),a=0!==a%2?a+1:a,this.topBracket=new eqEd.LeftCurlyTopBracket(this.parent),this.bottomBracket=new eqEd.LeftCurlyBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),b=0;b<Math.round(.5*a);b++)c=new eqEd.LeftCurlyMiddleBracket(this.parent,b,"middleVert"),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);for(d=new eqEd.LeftCurlyMiddleBracket(this.parent,Math.round(.5*a),"middleCurly"),d.parent=this,this.domObj.append(d.domObj),this.middleBrackets.push(d),b=Math.round(.5*a)+1;a+1>b;b++)c=new eqEd.LeftCurlyMiddleBracket(this.parent,b,"middleVert"),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets).concat([this.bottomBracket])}}}(),eqEd.LeftCurlyWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftCurlyWholeBracket",this.character="{",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftCurlyWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftCurlyWholeBracket.prototype.constructor=eqEd.LeftCurlyWholeBracket}(),eqEd.LeftCurlyTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.LeftCurlyTopBracket",this.character="⎧",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.15},function(){eqEd.LeftCurlyTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.LeftCurlyTopBracket.prototype.constructor=eqEd.LeftCurlyTopBracket}(),eqEd.LeftCurlyMiddleBracket=function(a,b,c){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftCurlyMiddleBracket",this.characterType=c,"middleVert"===this.characterType?this.character="⎪":"middleCurly"===this.characterType&&(this.character="⎨"),this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var d=0;this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var e,a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=0,c=this.parent.middleBrackets.length-1,d=.231;return this.index<Math.round(c/2)?b=((this.index+1)*d+.15)*a:this.index===Math.round(c/2)?b=(this.index*d+1.1+.15)*a:(e=Math.round(c/2)*d+1.1+.15,b=(e+.878+(this.index-Math.round(c/2)-1)*d)*a),b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftCurlyMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftCurlyMiddleBracket.prototype.constructor=eqEd.LeftCurlyMiddleBracket}(),eqEd.LeftCurlyBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.LeftCurlyBottomBracket",this.character="⎩",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=this.parent.middleBrackets.length,c=Math.floor(b/2);return this.parent.middleBrackets[c].top+(.231*(b-1-c)+.5)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftCurlyBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.LeftCurlyBottomBracket.prototype.constructor=eqEd.LeftCurlyBottomBracket}(),eqEd.RightCurlyBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightCurlyBracket",this.matchingBracketCtor=eqEd.LeftCurlyBracket,this.wholeBracket=new eqEd.RightCurlyWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.511111*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.755555*b:this.heightRatio>2.4&&this.heightRatio<=3?.8*b:this.heightRatio>3&&this.heightRatio<=3.33?.666666*b:.888888*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var c,a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return this.heightRatio<=1.5?a=b:this.heightRatio>1.5&&this.heightRatio<=2.4?a=2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?a=3*b:this.heightRatio>3&&this.heightRatio<=3.33?a=3.33*b:(c=this.bottomBracket.top/b,a=(c+1.652778-this.padTop)*b),a},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightCurlyBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightCurlyBracket.prototype.constructor=eqEd.RightCurlyBracket,eqEd.RightCurlyBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightCurlyBracket"></div>')},eqEd.RightCurlyBracket.prototype.updateBracketStructure=function(){var a,b,c,d;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.RightCurlyWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.RightCurlyWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.RightCurlyWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.round((this.heightRatio-3.4)/.231),a=0!==a%2?a+1:a,this.topBracket=new eqEd.RightCurlyTopBracket(this.parent),this.bottomBracket=new eqEd.RightCurlyBottomBracket(this.parent),this.topBracket.parent=this,this.bottomBracket.parent=this,this.domObj.append(this.topBracket.domObj),this.domObj.append(this.bottomBracket.domObj),b=0;b<Math.round(.5*a);b++)c=new eqEd.RightCurlyMiddleBracket(this.parent,b,"middleVert"),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);for(d=new eqEd.RightCurlyMiddleBracket(this.parent,Math.round(.5*a),"middleCurly"),d.parent=this,this.domObj.append(d.domObj),this.middleBrackets.push(d),b=Math.round(.5*a)+1;a+1>b;b++)c=new eqEd.RightCurlyMiddleBracket(this.parent,b,"middleVert"),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets).concat([this.bottomBracket])}}}(),eqEd.RightCurlyWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightCurlyWholeBracket",this.character="}",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightCurlyWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightCurlyWholeBracket.prototype.constructor=eqEd.RightCurlyWholeBracket}(),eqEd.RightCurlyTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.RightCurlyTopBracket",this.character="⎫",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.15},function(){eqEd.RightCurlyTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.RightCurlyTopBracket.prototype.constructor=eqEd.RightCurlyTopBracket}(),eqEd.RightCurlyMiddleBracket=function(a,b,c){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightCurlyMiddleBracket",this.characterType=c,"middleVert"===this.characterType?this.character="⎪":"middleCurly"===this.characterType&&(this.character="⎬"),this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var d=0;this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var e,a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=0,c=this.parent.middleBrackets.length-1,d=.231;return this.index<Math.round(c/2)?b=((this.index+1)*d+.15)*a:this.index===Math.round(c/2)?b=(this.index*d+1.1+.15)*a:(e=Math.round(c/2)*d+1.1+.15,b=(e+.878+(this.index-Math.round(c/2)-1)*d)*a),b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightCurlyMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightCurlyMiddleBracket.prototype.constructor=eqEd.RightCurlyMiddleBracket}(),eqEd.RightCurlyBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.RightCurlyBottomBracket",this.character="⎭",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=this.parent.middleBrackets.length,c=Math.floor(b/2);return this.parent.middleBrackets[c].top+(.231*(b-1-c)+.5)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightCurlyBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.RightCurlyBottomBracket.prototype.constructor=eqEd.RightCurlyBottomBracket}(),eqEd.LeftAngleBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftAngleBracket",this.matchingBracketCtor=eqEd.RightAngleBracket,this.wholeBracket=new eqEd.LeftAngleWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.377777*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.733333*b:.777777*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:3*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftAngleBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftAngleBracket.prototype.constructor=eqEd.LeftAngleBracket,eqEd.LeftAngleBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class=" bracket leftBracket leftAngleBracket"></div>')},eqEd.LeftAngleBracket.prototype.updateBracketStructure=function(){this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5?(this.wholeBracket=new eqEd.LeftAngleWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket]):this.heightRatio>1.5&&this.heightRatio<=2.4?(this.wholeBracket=new eqEd.LeftAngleWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket]):(this.wholeBracket=new eqEd.LeftAngleWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket])}}(),eqEd.LeftAngleWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftAngleWholeBracket",this.character="⟨",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftAngleWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftAngleWholeBracket.prototype.constructor=eqEd.LeftAngleWholeBracket}(),eqEd.RightAngleBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightAngleBracket",this.matchingBracketCtor=eqEd.LeftAngleBracket,this.wholeBracket=new eqEd.RightAngleWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.377777*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.733333*b:.777777*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:3*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightAngleBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightAngleBracket.prototype.constructor=eqEd.RightAngleBracket,eqEd.RightAngleBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket RightAngleBracket"></div>')},eqEd.RightAngleBracket.prototype.updateBracketStructure=function(){this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5?(this.wholeBracket=new eqEd.RightAngleWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket]):this.heightRatio>1.5&&this.heightRatio<=2.4?(this.wholeBracket=new eqEd.RightAngleWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket]):(this.wholeBracket=new eqEd.RightAngleWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket])}}(),eqEd.RightAngleWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightAngleWholeBracket",this.character="⟩",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightAngleWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightAngleWholeBracket.prototype.constructor=eqEd.RightAngleWholeBracket}(),eqEd.LeftFloorBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftFloorBracket",this.matchingBracketCtor=eqEd.RightFloorBracket,this.wholeBracket=new eqEd.LeftFloorWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.444444*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.5777777*b:this.heightRatio>2.4&&this.heightRatio<=3?.644444*b:.666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:(.6+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftFloorBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftFloorBracket.prototype.constructor=eqEd.LeftFloorBracket,eqEd.LeftFloorBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftFloorBracket"></div>')},eqEd.LeftFloorBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.LeftFloorWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.LeftFloorWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.LeftFloorWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.ceil((this.heightRatio-.6)/.45)+1,this.bottomBracket=new eqEd.LeftFloorBottomBracket(this.parent),this.bottomBracket.parent=this,this.domObj.append(this.bottomBracket.domObj),b=0;a>b;b++)c=new eqEd.LeftFloorMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=this.middleBrackets.concat([this.bottomBracket])}}}(),eqEd.LeftFloorWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftFloorWholeBracket",this.character="⌊",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftFloorWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftFloorWholeBracket.prototype.constructor=eqEd.LeftFloorWholeBracket}(),eqEd.LeftFloorMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftFloorMiddleBracket",this.character="⎢",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index-.15)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftFloorMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftFloorMiddleBracket.prototype.constructor=eqEd.LeftFloorMiddleBracket}(),eqEd.LeftFloorBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.LeftFloorBottomBracket",this.character="⎣",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=this.parent.middleBrackets[this.parent.middleBrackets.length-1].top-.65*a;return b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftFloorBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.LeftFloorBottomBracket.prototype.constructor=eqEd.LeftFloorBottomBracket}(),eqEd.RightFloorBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightFloorBracket",this.matchingBracketCtor=eqEd.LeftFloorBracket,this.wholeBracket=new eqEd.RightFloorWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.444444*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.577777*b:this.heightRatio>2.4&&this.heightRatio<=3?.644444*b:.666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:(.6+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightFloorBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightFloorBracket.prototype.constructor=eqEd.RightFloorBracket,eqEd.RightFloorBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightFloorBracket"></div>')},eqEd.RightFloorBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.RightFloorWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.RightFloorWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.RightFloorWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.ceil((this.heightRatio-.6)/.45)+1,this.bottomBracket=new eqEd.RightFloorBottomBracket(this.parent),this.bottomBracket.parent=this,this.domObj.append(this.bottomBracket.domObj),b=0;a>b;b++)c=new eqEd.RightFloorMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=this.middleBrackets.concat([this.bottomBracket])}}}(),eqEd.RightFloorWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightFloorWholeBracket",this.character="⌋",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightFloorWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightFloorWholeBracket.prototype.constructor=eqEd.RightFloorWholeBracket}(),eqEd.RightFloorMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightFloorMiddleBracket",this.character="⎥",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();
var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index-.15)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightFloorMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightFloorMiddleBracket.prototype.constructor=eqEd.RightFloorMiddleBracket}(),eqEd.RightFloorBottomBracket=function(a){eqEd.BottomBracket.call(this,a),this.className="eqEd.RightFloorBottomBracket",this.character="⎦",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var b=0;this.properties.push(new Property(this,"top",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize],b=this.parent.middleBrackets[this.parent.middleBrackets.length-1].top-.65*a;return b},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightFloorBottomBracket.prototype=Object.create(eqEd.BottomBracket.prototype),eqEd.RightFloorBottomBracket.prototype.constructor=eqEd.RightFloorBottomBracket}(),eqEd.LeftCeilBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftCeilBracket",this.matchingBracketCtor=eqEd.RightCeilBracket,this.wholeBracket=new eqEd.LeftCeilWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.444444*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.5777777*b:this.heightRatio>2.4&&this.heightRatio<=3?.644444*b:.666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:(.6+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftCeilBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftCeilBracket.prototype.constructor=eqEd.LeftCeilBracket,eqEd.LeftCeilBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftCeilBracket"></div>')},eqEd.LeftCeilBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.LeftCeilWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.LeftCeilWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.LeftCeilWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.ceil((this.heightRatio-.6)/.45)+1,this.topBracket=new eqEd.LeftCeilTopBracket(this.parent),this.topBracket.parent=this,this.domObj.append(this.topBracket.domObj),b=0;a>b;b++)c=new eqEd.LeftCeilMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets)}}}(),eqEd.LeftCeilWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftCeilWholeBracket",this.character="⌈",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftCeilWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftCeilWholeBracket.prototype.constructor=eqEd.LeftCeilWholeBracket}(),eqEd.LeftCeilTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.LeftCeilTopBracket",this.character="⎡",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.4},function(){eqEd.LeftCeilTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.LeftCeilTopBracket.prototype.constructor=eqEd.LeftCeilTopBracket}(),eqEd.LeftCeilMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftCeilMiddleBracket",this.character="⎢",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index-.15)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftCeilMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftCeilMiddleBracket.prototype.constructor=eqEd.LeftCeilMiddleBracket}(),eqEd.RightCeilBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightCeilBracket",this.matchingBracketCtor=eqEd.LeftCeilBracket,this.wholeBracket=new eqEd.RightCeilWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?.444444*b:this.heightRatio>1.5&&this.heightRatio<=2.4?.5777777*b:this.heightRatio>2.4&&this.heightRatio<=3?.644444*b:.666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=this.heightRatio<=1.5?b:this.heightRatio>1.5&&this.heightRatio<=2.4?2.4*b:this.heightRatio>2.4&&this.heightRatio<=3?3*b:(.6+.45*(this.middleBrackets.length-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightCeilBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightCeilBracket.prototype.constructor=eqEd.RightCeilBracket,eqEd.RightCeilBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightCeilBracket"></div>')},eqEd.RightCeilBracket.prototype.updateBracketStructure=function(){var a,b,c;if(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],this.heightRatio<=1.5)this.wholeBracket=new eqEd.RightCeilWholeBracket(this.parent,"MathJax_Main"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>1.5&&this.heightRatio<=2.4)this.wholeBracket=new eqEd.RightCeilWholeBracket(this.parent,"MathJax_Size3"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else if(this.heightRatio>2.4&&this.heightRatio<=3)this.wholeBracket=new eqEd.RightCeilWholeBracket(this.parent,"MathJax_Size4"),this.wholeBracket.parent=this,this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket];else{for(a=Math.ceil((this.heightRatio-.6)/.45)+1,this.topBracket=new eqEd.RightCeilTopBracket(this.parent),this.topBracket.parent=this,this.domObj.append(this.topBracket.domObj),b=0;a>b;b++)c=new eqEd.RightCeilMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=[this.topBracket].concat(this.middleBrackets)}}}(),eqEd.RightCeilWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightCeilWholeBracket",this.character="⌉",this.fontStyle=b,this.domObj=this.buildDomObj(),"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightCeilWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightCeilWholeBracket.prototype.constructor=eqEd.RightCeilWholeBracket}(),eqEd.RightCeilTopBracket=function(a){eqEd.TopBracket.call(this,a),this.className="eqEd.RightCeilTopBracket",this.character="⎤",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj(),this.adjustTop=.4},function(){eqEd.RightCeilTopBracket.prototype=Object.create(eqEd.TopBracket.prototype),eqEd.RightCeilTopBracket.prototype.constructor=eqEd.RightCeilTopBracket}(),eqEd.RightCeilMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightCeilMiddleBracket",this.character="⎥",this.fontStyle="MathJax_Size4",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.45*this.index-.15)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightCeilMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightCeilMiddleBracket.prototype.constructor=eqEd.RightCeilMiddleBracket}(),eqEd.LeftAbsValBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftAbsValBracket",this.matchingBracketCtor=eqEd.RightAbsValBracket,this.wholeBracket=new eqEd.LeftAbsValWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=.2666666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize],c=Math.ceil((this.heightRatio-1.07)/.5)+1;return a=(1.07+.5*(c-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftAbsValBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftAbsValBracket.prototype.constructor=eqEd.LeftAbsValBracket,eqEd.LeftAbsValBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftAbsValBracket"></div>')},eqEd.LeftAbsValBracket.prototype.updateBracketStructure=function(){var a,b,c;for(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],a=Math.ceil((this.heightRatio-1.07)/.5)+1,b=0;a>b;b++)c=new eqEd.LeftAbsValMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=this.middleBrackets}}(),eqEd.RightAbsValBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightAbsValBracket",this.matchingBracketCtor=eqEd.LeftAbsValBracket,this.wholeBracket=new eqEd.RightAbsValWholeBracket(this.parent,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=.266666*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize],c=Math.ceil((this.heightRatio-1.07)/.5)+1;return a=(1.07+.5*(c-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightAbsValBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightAbsValBracket.prototype.constructor=eqEd.RightAbsValBracket,eqEd.RightAbsValBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightAbsValBracket"></div>')},eqEd.RightAbsValBracket.prototype.updateBracketStructure=function(){var a,b,c;for(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],a=Math.ceil((this.heightRatio-1.07)/.5)+1,b=0;a>b;b++)c=new eqEd.RightAbsValMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=this.middleBrackets}}(),eqEd.LeftAbsValWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftAbsValWholeBracket",this.character="|",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftAbsValWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftAbsValWholeBracket.prototype.constructor=eqEd.LeftAbsValWholeBracket}(),eqEd.LeftAbsValMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftAbsValMiddleBracket",this.character="|",this.fontStyle="MathJax_Main",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.5*this.index-.06)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftAbsValMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftAbsValMiddleBracket.prototype.constructor=eqEd.LeftAbsValMiddleBracket}(),eqEd.RightAbsValWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightAbsValWholeBracket",this.character="|",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightAbsValWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightAbsValWholeBracket.prototype.constructor=eqEd.RightAbsValWholeBracket}(),eqEd.RightAbsValMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightAbsValMiddleBracket",this.character="|",this.fontStyle="MathJax_Main",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.5*this.index-.06)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightAbsValMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightAbsValMiddleBracket.prototype.constructor=eqEd.RightAbsValMiddleBracket}(),eqEd.LeftNormBracket=function(a){var b,c;eqEd.LeftBracket.call(this,a),this.className="eqEd.LeftNormBracket",this.matchingBracketCtor=eqEd.RightNormBracket,this.wholeBracket=new eqEd.LeftNormWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=.4888888*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize],c=Math.ceil((this.heightRatio-1.07)/.5)+1;return a=(1.07+.5*(c-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.LeftNormBracket.prototype=Object.create(eqEd.LeftBracket.prototype),eqEd.LeftNormBracket.prototype.constructor=eqEd.LeftNormBracket,eqEd.LeftNormBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket leftBracket leftNormBracket"></div>')},eqEd.LeftNormBracket.prototype.updateBracketStructure=function(){var a,b,c;for(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],a=Math.ceil((this.heightRatio-1.07)/.5)+1,b=0;a>b;b++)c=new eqEd.LeftNormMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=this.middleBrackets}}(),eqEd.RightNormBracket=function(a){var b,c;eqEd.RightBracket.call(this,a),this.className="eqEd.RightNormBracket",this.matchingBracketCtor=eqEd.LeftNormBracket,this.wholeBracket=new eqEd.RightNormWholeBracket(a,"MathJax_Main"),this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.wholeBracket.parent=this,this.domObj=this.buildDomObj(),this.domObj.append(this.wholeBracket.domObj),this.children=[this.wholeBracket],b=0,this.properties.push(new Property(this,"width",b,{get:function(){return b},set:function(a){b=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize];return a=.4888888*b},updateDom:function(){this.domObj.updateWidth(this.width)}})),c=0,this.properties.push(new Property(this,"height",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=0,b=this.equation.fontMetrics.height[this.parent.parent.fontSize],c=Math.ceil((this.heightRatio-1.07)/.5)+1;return a=(1.07+.5*(c-1))*b},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.RightNormBracket.prototype=Object.create(eqEd.RightBracket.prototype),eqEd.RightNormBracket.prototype.constructor=eqEd.RightNormBracket,eqEd.RightNormBracket.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="bracket rightBracket rightNormBracket"></div>')},eqEd.RightNormBracket.prototype.updateBracketStructure=function(){var a,b,c;for(this.domObj.empty(),this.wholeBracket=null,this.topBracket=null,this.middleBrackets=[],this.bottomBracket=null,this.children=[],a=Math.ceil((this.heightRatio-1.07)/.5)+1,b=0;a>b;b++)c=new eqEd.RightNormMiddleBracket(this.parent,b),c.parent=this,this.domObj.append(c.domObj),this.middleBrackets.push(c);this.children=this.middleBrackets}}(),eqEd.LeftNormWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.LeftNormWholeBracket",this.character="∥",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftNormWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.LeftNormWholeBracket.prototype.constructor=eqEd.LeftNormWholeBracket}(),eqEd.LeftNormMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.LeftNormMiddleBracket",this.character="∥",this.fontStyle="MathJax_Main",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.5*this.index-.06)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LeftNormMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.LeftNormMiddleBracket.prototype.constructor=eqEd.LeftNormMiddleBracket}(),eqEd.RightNormWholeBracket=function(a,b){var c,d,e,f;eqEd.WholeBracket.call(this,a),this.className="eqEd.RightNormWholeBracket",this.character="∥",this.fontStyle=b,this.domObj=this.buildDomObj(),this.adjustTop=0,"MathJax_Main"===this.fontStyle?this.adjustTop=-.0625:"MathJax_Size3"===this.fontStyle?this.adjustTop=.7:"MathJax_Size4"===this.fontStyle&&(this.adjustTop=.995),c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"height",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateHeight(this.height)}})),e=0,this.properties.push(new Property(this,"left",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),f=0,this.properties.push(new Property(this,"top",f,{get:function(){return f},set:function(a){f=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightNormWholeBracket.prototype=Object.create(eqEd.WholeBracket.prototype),eqEd.RightNormWholeBracket.prototype.constructor=eqEd.RightNormWholeBracket}(),eqEd.RightNormMiddleBracket=function(a,b){eqEd.MiddleBracket.call(this,a,b),this.className="eqEd.RightNormMiddleBracket",this.character="∥",this.fontStyle="MathJax_Main",this.domObj=this.buildDomObj();var c=0;this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.parent.fontSize];return(.5*this.index-.06)*a},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.RightNormMiddleBracket.prototype=Object.create(eqEd.MiddleBracket.prototype),eqEd.RightNormMiddleBracket.prototype.constructor=eqEd.RightNormMiddleBracket}(),eqEd.BracketPairWrapper=function(a,b){var c,d,e,f;eqEd.Wrapper.call(this,a),this.className="eqEd.BracketPairWrapper",this.bracketType=b,c={parenthesisBracket:{left:eqEd.LeftParenthesisBracket,right:eqEd.RightParenthesisBracket},squareBracket:{left:eqEd.LeftSquareBracket,right:eqEd.RightSquareBracket},curlyBracket:{left:eqEd.LeftCurlyBracket,right:eqEd.RightCurlyBracket},angleBracket:{left:eqEd.LeftAngleBracket,right:eqEd.RightAngleBracket},floorBracket:{left:eqEd.LeftFloorBracket,right:eqEd.RightFloorBracket},ceilBracket:{left:eqEd.LeftCeilBracket,right:eqEd.RightCeilBracket},absValBracket:{left:eqEd.LeftAbsValBracket,right:eqEd.RightAbsValBracket},normBracket:{left:eqEd.LeftNormBracket,right:eqEd.RightNormBracket}},this.leftBracket=new c[b]["left"](this),this.bracketContainer=new eqEd.BracketContainer(this),this.rightBracket=new c[b]["right"](this),this.domObj=this.buildDomObj(),this.domObj.append(this.leftBracket.domObj),this.domObj.append(this.bracketContainer.domObj),this.domObj.append(this.rightBracket.domObj),this.childContainers=[this.bracketContainer],this.childNoncontainers=[this.leftBracket,this.rightBracket],d=0,this.properties.push(new Property(this,"width",d,{get:function(){return d},set:function(a){d=a},compute:function(){return this.leftBracket.width+this.bracketContainer.width+this.rightBracket.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),e=0,this.properties.push(new Property(this,"topAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var b,c,a=0;return this.bracketContainer.wrappers.length>0&&(b=this.bracketContainer.wrappers[this.bracketContainer.maxTopAlignIndex].topAlign,c=.5*this.leftBracket.height,a=b>c?b:c),a},updateDom:function(){}})),f=0,this.properties.push(new Property(this,"bottomAlign",f,{get:function(){return f},set:function(a){f=a},compute:function(){var b,c,a=0;return this.bracketContainer.wrappers.length>0&&(b=this.bracketContainer.wrappers[this.bracketContainer.maxBottomAlignIndex].bottomAlign,c=.5*this.leftBracket.height,a=b>c?b:c),a},updateDom:function(){}}))},function(){eqEd.BracketPairWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.BracketPairWrapper.prototype.constructor=eqEd.BracketPairWrapper,eqEd.BracketPairWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdwrapper bracketPairWrapper '+this.bracketType+'"></div>')},eqEd.BracketPairWrapper.prototype.clone=function(){var a=new this.constructor(this.equation,this.bracketType);return a.leftBracket=this.leftBracket.clone(),a.bracketContainer=this.bracketContainer.clone(),a.rightBracket=this.rightBracket.clone(),a.leftBracket.parent=a,a.bracketContainer.parent=a,a.rightBracket.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.leftBracket.domObj),a.domObj.append(a.bracketContainer.domObj),a.domObj.append(a.rightBracket.domObj),a.childNoncontainers=[a.leftBracket,a.rightBracket],a.childContainers=[a.bracketContainer],a},eqEd.BracketPairWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:this.bracketType,operands:{bracketedExpression:this.bracketContainer.buildJsonObj()}};return a},eqEd.BracketPairWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.BracketPairWrapper(b,a.value);for(d=0;d<a.operands.bracketedExpression.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.bracketedExpression[d].type),f=e.constructFromJsonObj(a.operands.bracketedExpression[d],b),c.bracketContainer.addWrappers([d,f]);return c}}(),eqEd.BracketContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.BracketContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.parent.leftBracket.width},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var b,c,a=0;return this.wrappers.length>0&&(b=this.wrappers[this.maxTopAlignIndex].topAlign,c=.5*this.parent.leftBracket.height,c>b&&(a=c-b)),a},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){for(var a="",b=this.parent.parent;b instanceof eqEd.BracketContainer;)b=b.parent.parent;return a=b.fontSize},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.BracketContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.BracketContainer.prototype.constructor=eqEd.BracketContainer,eqEd.BracketContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer bracketContainer"></div>')}}(),eqEd.Word=function(a,b,c){var d,e;eqEd.BoundEquationComponent.call(this,a),this.className="eqEd.Word",this.characters=b.split(""),this.fontStyle=c,this.domObj=this.buildDomObj(),IEVersion>=9?this.adjustTop="MathJax_MathItalic"===this.fontStyle?.345:.3:"MathJax_MathItalic"===this.fontStyle&&(this.adjustTop=.025),d=0,this.properties.push(new Property(this,"width",d,{get:function(){return d},set:function(a){d=a},compute:function(){var b,a=0;for(b=0;b<this.characters.length;b++)a+=this.equation.fontMetrics.width[this.characters[b]][this.fontStyle][this.parent.parent.fontSize];return a},updateDom:function(){this.domObj.updateWidth(this.width)}})),e=0,this.properties.push(new Property(this,"height",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.getFontHeight();
return 1*a},updateDom:function(){this.domObj.updateHeight(this.height)}}))},function(){eqEd.Word.prototype=Object.create(eqEd.BoundEquationComponent.prototype),eqEd.Word.prototype.constructor=eqEd.Word,eqEd.Word.prototype.buildDomObj=function(){return new eqEd.EquationDom(this,'<div class="symbol '+this.fontStyle+'">'+this.characters.join("")+"</div>")}}(),eqEd.FunctionWord=function(a,b,c){var d,e;eqEd.Word.call(this,a,b,c),this.className="eqEd.FunctionWord",d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.FunctionWord.prototype=Object.create(eqEd.Word.prototype),eqEd.FunctionWord.prototype.constructor=eqEd.FunctionWord}(),eqEd.FunctionWrapper=function(a,b,c){var d,e,f,g;eqEd.Wrapper.call(this,a),this.className="eqEd.FunctionWrapper",this.word=new eqEd.FunctionWord(this,b,c),this.domObj=this.buildDomObj(),this.domObj.append(this.word.domObj),this.childNoncontainers=[this.word],this.padLeft=.1,d=0,this.properties.push(new Property(this,"padRight",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=.175;return this.index!==this.parent.wrappers.length-1&&(this.parent.wrappers[this.index+1]instanceof eqEd.SuperscriptWrapper||this.parent.wrappers[this.index+1]instanceof eqEd.SubscriptWrapper?a=0:(this.parent.wrappers[this.index+1]instanceof eqEd.BracketWrapper||this.parent.wrappers[this.index+1]instanceof eqEd.BracketPairWrapper)&&(a=.05)),a},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"width",e,{get:function(){return e},set:function(a){e=a},compute:function(){return this.word.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),f=0,this.properties.push(new Property(this,"topAlign",f,{get:function(){return f},set:function(a){f=a},compute:function(){return.5*this.word.height},updateDom:function(){}})),g=0,this.properties.push(new Property(this,"bottomAlign",g,{get:function(){return g},set:function(a){g=a},compute:function(){return.5*this.word.height},updateDom:function(){}}))},function(){eqEd.FunctionWrapper.prototype=Object.create(eqEd.Wrapper.prototype),eqEd.FunctionWrapper.prototype.constructor=eqEd.FunctionWrapper,eqEd.FunctionWrapper.prototype.clone=function(){return new this.constructor(this.equation,this.word.characters.join(""),this.word.fontStyle)},eqEd.FunctionWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper symbolWrapper"></div>')},eqEd.FunctionWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:this.word.characters.join(""),operands:null};return a},eqEd.FunctionWrapper.constructFromJsonObj=function(a,b){var c=new eqEd.FunctionWrapper(b,a.value,"MathJax_Main");return c}}(),eqEd.FunctionLowerWrapper=function(a,b,c){var d,e,f,g;for(eqEd.FunctionWrapper.call(this,a,b,c),this.className="eqEd.FunctionLowerWrapper",d=0;d<this.properties.length;d++)("topAlign"===this.properties[d].propName||"bottomAlign"===this.properties[d].propName||"width"===this.properties[d].propName)&&this.properties.splice(d,1);this.belowFunctionGap=-.075,this.functionWord=new eqEd.FunctionLowerWord(this,b,c),this.functionLowerContainer=new eqEd.FunctionLowerContainer(this),this.domObj=this.buildDomObj(),this.domObj.append(this.functionWord.domObj),this.domObj.append(this.functionLowerContainer.domObj),this.childNoncontainers=[this.functionWord],this.childContainers=[this.functionLowerContainer],this.padLeft=0,this.padRight=.05,e=0,this.properties.push(new Property(this,"width",e,{get:function(){return e},set:function(a){e=a},compute:function(){var b,c;return this.equation.fontMetrics.height[this.parent.fontSize],b=0,c=this.functionWord.width,b=c>this.functionLowerContainer.width?c:this.functionLowerContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),f=0,this.properties.push(new Property(this,"topAlign",f,{get:function(){return f},set:function(a){f=a},compute:function(){return.5*this.functionWord.height},updateDom:function(){}})),g=0,this.properties.push(new Property(this,"bottomAlign",g,{get:function(){return g},set:function(a){g=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.fontSize];return.5*this.functionWord.height+this.belowFunctionGap*a+this.functionLowerContainer.height},updateDom:function(){}}))},function(){eqEd.FunctionLowerWrapper.prototype=Object.create(eqEd.FunctionWrapper.prototype),eqEd.FunctionLowerWrapper.prototype.constructor=eqEd.FunctionLowerWrapper,eqEd.FunctionLowerWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper functionLowerWrapper"></div>')},eqEd.FunctionLowerWrapper.prototype.clone=function(){var a=new this.constructor(this.equation,this.word.characters.join(""),this.word.fontStyle);return a.functionLowerContainer=this.functionLowerContainer.clone(),a.functionLowerContainer.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.word.domObj),a.domObj.append(a.functionLowerContainer.domObj),a.childNoncontainers=[a.word],a.childContainers=[a.functionLowerContainer],a},eqEd.FunctionLowerWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:this.functionWord.characters.join(""),operands:{lower:this.functionLowerContainer.buildJsonObj()}};return a},eqEd.FunctionLowerWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.FunctionLowerWrapper(b,a.value,"MathJax_Main");for(d=0;d<a.operands.lower.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.lower[d].type),f=e.constructFromJsonObj(a.operands.lower[d],b),c.functionLowerContainer.addWrappers([d,f]);return c}}(),eqEd.FunctionLowerWord=function(a,b,c){var d,e;eqEd.Word.call(this,a,b,c),this.className="eqEd.FunctionLowerWord",d=0,this.properties.push(new Property(this,"left",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=.5*(this.parent.width-(this.parent.padLeft+this.parent.padRight)*a-this.width);return b},updateDom:function(){this.domObj.updateLeft(this.left)}})),e=0,this.properties.push(new Property(this,"top",e,{get:function(){return e},set:function(a){e=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.FunctionLowerWord.prototype=Object.create(eqEd.Word.prototype),eqEd.FunctionLowerWord.prototype.constructor=eqEd.FunctionLowerWord}(),eqEd.FunctionLowerContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.FunctionLowerContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=.5*(this.parent.width-(this.parent.padLeft+this.parent.padRight)*a-this.width);return b},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return this.parent.functionWord.height+this.parent.belowFunctionGap*a},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){for(var a="",b=this.parent.parent;b instanceof eqEd.BracketContainer;)b=b.parent.parent;return a="fontSizeSmaller"===b.fontSize||"fontSizeSmallest"===b.fontSize?"fontSizeSmallest":"fontSizeSmaller"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.FunctionLowerContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.FunctionLowerContainer.prototype.constructor=eqEd.FunctionLowerContainer,eqEd.FunctionLowerContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer functionLowerContainer"></div>')}}(),eqEd.LogLowerWrapper=function(a){var b,c,d,e;for(eqEd.FunctionWrapper.call(this,a,"log","MathJax_Main"),this.className="eqEd.LogLowerWrapper",b=0;b<this.properties.length;b++)("topAlign"===this.properties[b].propName||"bottomAlign"===this.properties[b].propName||"width"===this.properties[b].propName)&&this.properties.splice(b,1);this.logLowerOverlap=.75,this.functionWord=new eqEd.LogLowerWord(this),this.functionLowerContainer=new eqEd.LogLowerContainer(this),this.domObj=this.buildDomObj(),this.domObj.append(this.functionWord.domObj),this.domObj.append(this.functionLowerContainer.domObj),this.childNoncontainers=[this.functionWord],this.childContainers=[this.functionLowerContainer],c=0,this.properties.push(new Property(this,"width",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.functionWord.width+this.functionLowerContainer.width},updateDom:function(){this.domObj.updateWidth(this.width)}})),d=0,this.properties.push(new Property(this,"topAlign",d,{get:function(){return d},set:function(a){d=a},compute:function(){return.5*this.functionWord.height},updateDom:function(){}})),e=0,this.properties.push(new Property(this,"bottomAlign",e,{get:function(){return e},set:function(a){e=a},compute:function(){var a=this.equation.fontMetrics.height[this.functionLowerContainer.fontSize];return this.functionWord.height-this.logLowerOverlap*a+this.functionLowerContainer.height-this.topAlign},updateDom:function(){}}))},function(){eqEd.LogLowerWrapper.prototype=Object.create(eqEd.FunctionWrapper.prototype),eqEd.LogLowerWrapper.prototype.constructor=eqEd.LogLowerWrapper,eqEd.LogLowerWrapper.prototype.buildDomObj=function(){return new eqEd.WrapperDom(this,'<div class="eqEdWrapper logLowerWrapper"></div>')},eqEd.LogLowerWrapper.prototype.clone=function(){var a=new this.constructor(this.equation);return a.functionLowerContainer=this.functionLowerContainer.clone(),a.functionLowerContainer.parent=a,a.domObj=a.buildDomObj(),a.domObj.append(a.functionWord.domObj),a.domObj.append(a.functionLowerContainer.domObj),a.childNoncontainers=[a.functionWord],a.childContainers=[a.functionLowerContainer],a},eqEd.LogLowerWrapper.prototype.buildJsonObj=function(){var a={type:this.className.substring(5,this.className.length-7),value:null,operands:{lower:this.functionLowerContainer.buildJsonObj()}};return a},eqEd.LogLowerWrapper.constructFromJsonObj=function(a,b){var d,e,f,c=new eqEd.LogLowerWrapper(b);for(d=0;d<a.operands.lower.length;d++)e=eqEd.Equation.JsonTypeToConstructor(a.operands.lower[d].type),f=e.constructFromJsonObj(a.operands.lower[d],b),c.functionLowerContainer.addWrappers([d,f]);return c}}(),eqEd.LogLowerWord=function(a){var b,c;eqEd.Word.call(this,a,"log","MathJax_Main"),this.className="eqEd.LogLowerWord",b=0,this.properties.push(new Property(this,"left",b,{get:function(){return b},set:function(a){b=a},compute:function(){return 0},updateDom:function(){this.domObj.updateLeft(this.left)}})),c=0,this.properties.push(new Property(this,"top",c,{get:function(){return c},set:function(a){c=a},compute:function(){return 0},updateDom:function(){this.domObj.updateTop(this.top)}}))},function(){eqEd.LogLowerWord.prototype=Object.create(eqEd.Word.prototype),eqEd.LogLowerWord.prototype.constructor=eqEd.LogLowerWord}(),eqEd.LogLowerContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.LogLowerContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){return this.parent.functionWord.width},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.fontSize];return this.parent.functionWord.height-this.parent.logLowerOverlap*a},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){for(var a="",b=this.parent.parent;b instanceof eqEd.BracketContainer;)b=b.parent.parent;return a="fontSizeSmaller"===b.fontSize||"fontSizeSmallest"===b.fontSize?"fontSizeSmallest":"fontSizeSmaller"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.LogLowerContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.LogLowerContainer.prototype.constructor=eqEd.LogLowerContainer,eqEd.LogLowerContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer logLowerContainer"></div>')}}(),eqEd.AccentContainer=function(a){var b,c,d,e;eqEd.Container.call(this,a),this.className="eqEd.AccentContainer",this.domObj=this.buildDomObj(),b=new eqEd.SquareEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),c=0,this.properties.push(new Property(this,"left",c,{get:function(){return c},set:function(a){c=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize];return.5*(this.parent.width-(this.parent.padLeft+this.parent.padRight)*a-this.width),0},updateDom:function(){this.domObj.updateLeft(this.left)}})),d=0,this.properties.push(new Property(this,"top",d,{get:function(){return d},set:function(a){d=a},compute:function(){var a=this.equation.fontMetrics.height[this.parent.parent.fontSize],b=0;return this.parent.accentGap>=0&&(b=this.parent.accentGap*a),b},updateDom:function(){this.domObj.updateTop(this.top)}})),e="",this.properties.push(new Property(this,"fontSize",e,{get:function(){return e},set:function(a){e=a},compute:function(){for(var b=this.parent.parent;b instanceof eqEd.BracketContainer;)b=b.parent.parent;return b.fontSize},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.AccentContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.AccentContainer.prototype.constructor=eqEd.AccentContainer,eqEd.AccentContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer accentContainer"></div>')}}(),eqEd.TopLevelContainer=function(a){var b,c;eqEd.Container.call(this,a),this.className="eqEd.TopLevelContainer",this.equation=a,this.padTop=.2,this.padBottom=.2,this.domObj=this.buildDomObj(),b=new eqEd.TopLevelEmptyContainerWrapper(this.equation),this.addWrappers([0,b]),c="",this.properties.push(new Property(this,"fontSize",c,{get:function(){return c},set:function(a){c=a},compute:function(){return"fontSizeNormal"},updateDom:function(){this.domObj.updateFontSize(this.fontSize)}}))},function(){eqEd.TopLevelContainer.prototype=Object.create(eqEd.Container.prototype),eqEd.TopLevelContainer.prototype.constructor=eqEd.TopLevelContainer,eqEd.TopLevelContainer.prototype.buildDomObj=function(){return new eqEd.ContainerDom(this,'<div class="eqEdContainer topLevelContainer"></div>')}}(),toggleCursorVisibility=function(){$(".cursor").toggleClass("cursorOff")},cursorBlinkTimers=new Array,addBlink=function(){removeBlink(),function(){window.setTimeout(function(){},3e3)}();var a=window.setInterval(toggleCursorVisibility,750);cursorBlinkTimers.push(a)},removeBlink=function(){for(var a=0;a<cursorBlinkTimers.length;a++)window.clearInterval(cursorBlinkTimers[a]);cursorBlinkTimers=[],$(".cursorOff").removeClass("cursorOff")},mouseDown=!1,toggleLines=[],highlightStartIndex=null,highlightEndIndex=null,removeCursor=function(){$(".cursor").remove(),removeBlink()},removeHighlight=function(){$(".highlight").remove(),$(".highlighted").removeClass("highlighted"),$(".eqEdContainer").css("z-index",3),$(".eqEdWrapper").css("z-index",3),toggleLines=[],highlightStartIndex=null},clearOnMouseDown=function(){mouseDown=!0,removeCursor(),removeHighlight(),clearHighlighted(),$(".activeContainer").removeClass("activeContainer"),$(".hoverContainer").removeClass("hoverContainer"),$("#hiddenFocusInput").blur()},moveHiddenInput=function(){$("#hiddenFocusInput").css("left",$(".cursor").first().offset().left),$("#hiddenFocusInput").css("top",$(".cursor").first().offset().top),$("#hiddenFocusInput").focus().click()},calculateIndex=function(a){var d,b=0,c=!1;for(d=0;d<toggleLines.length;d++)if(a<toggleLines[d]){b=d,c=!0;break}return c||(b=toggleLines.length),b},addCursor=function(a,b){var c,d,e,f,g,h,i;if(removeCursor(),$(".activeContainer").removeClass("activeContainer"),a instanceof eqEd.TopLevelContainer||a.domObj.value.addClass("activeContainer"),a instanceof eqEd.SquareEmptyContainer)c=$('<div class="cursor squareCursor"></div>');else{if(d=0,e=-1,f=!1,g=0===toggleLines.length,!(a.wrappers[0]instanceof eqEd.TopLevelEmptyContainerWrapper)){for(h=0;h<a.wrappers.length;h++)i=a.wrappers[h],d+=.5*i.width,g&&toggleLines.push(d),d>b&&!f&&(e+=d-.5*i.width,highlightStartIndex=h,f=!0),d+=.5*i.width;f||(e+=d,highlightStartIndex=a.wrappers.length)}c=$('<div class="cursor normalCursor"></div>'),c.css("left",e)}a.domObj.value.append(c),addBlink(),moveHiddenInput()},addCursorAtIndex=function(a,b){var c,d,e,f,g,h,i;if(removeCursor(),removeHighlight(),addHighlight(a),$(".activeContainer").removeClass("activeContainer"),a instanceof eqEd.TopLevelContainer||a.domObj.value.addClass("activeContainer"),highlightStartIndex=b,a instanceof eqEd.SquareEmptyContainer)c=$('<div class="cursor squareCursor"></div>');else{if(d=0,e=-1,f=!1,g=0===toggleLines.length,!(a.wrappers[0]instanceof eqEd.TopLevelEmptyContainerWrapper))for(h=0;h<a.wrappers.length;h++)i=a.wrappers[h],b===h&&(e+=d,f=!0),d+=.5*i.width,g&&toggleLines.push(d),d+=.5*i.width;f||(e+=d,f=!0),c=$('<div class="cursor normalCursor"></div>'),c.css("left",e)}a.domObj.value.append(c),addBlink(),moveHiddenInput()},addHighlight=function(a){var b=$('<div class="highlight"></div>');a.domObj.value.css("z-index",4),b.css("z-index",5),a.domObj.value.children().css("z-index",6),a.domObj.value.append(b)},updateHighlightFormatting=function(a,b){var c,d,e,f,g,h,i;if(highlightEndIndex=b,c=$(".highlight"),c.length>0){if(d=0,e=0,f=0,$(".highlighted").removeClass("highlighted"),highlightEndIndex>highlightStartIndex){for(d=a.wrappers[highlightStartIndex].left,e=0,f=a.height,g=0,h=highlightStartIndex;highlightEndIndex>h;h++)highlightStartIndex!==highlightEndIndex&&(i=a.wrappers[h],i.domObj.value.addClass("highlighted"),g+=i.width);width=g}else if(highlightStartIndex>highlightEndIndex){for(d=a.wrappers[highlightEndIndex].left,e=0,f=a.height,g=0,h=highlightEndIndex;highlightStartIndex>h;h++)highlightStartIndex!==highlightEndIndex&&(i=a.wrappers[h],i.domObj.value.addClass("highlighted"),g+=i.width);width=g}else highlightStartIndex===highlightEndIndex&&(d=0,e=0,f=0,width=0);c.css({left:d,top:e,height:f,width:width})}},$(document).on("touchstart mousedown",function(){clearOnMouseDown()}),$(document).on("touchend mouseup",function(){mouseDown=!1,$(".cursor").length>0&&addBlink()}),onMouseDown=function(a,b){var c,d,e;$(a).children().first().hasClass("squareEmptyContainerWrapper")||(b.preventDefault(),b.stopPropagation(),clearOnMouseDown(),c=$(a).data("eqObject"),addHighlight(c),d="undefined"!=typeof b.originalEvent.pageX?b.originalEvent.pageX:b.originalEvent.touches[0].pageX,e=d-c.domObj.value.offset().left,addCursor(c,e))},$(document).on("touchstart mousedown",".tabs",function(a){a.stopPropagation()}),$(document).on("touchstart mousedown",".eqEdContainer",function(a){onMouseDown(this,a)}),$(document).on("mousemove",function(){$(".hoverContainer").removeClass("hoverContainer")}),$(document).on("mousemove",".eqEdContainer",function(a){var b,c,d;mouseDown&&clearHighlighted(),!mouseDown||$(this).children().first().hasClass("squareEmptyContainerWrapper")||$(this).hasClass("squareEmptyContainer")?(b=$(this).data("eqObject"),$(".hoverContainer").removeClass("hoverContainer"),$(this).hasClass("activeContainer")||b.wrappers[0]instanceof eqEd.SquareEmptyContainerWrapper||$(this).hasClass("topLevelContainer")||$(".highlighted").length>0||$(this).addClass("hoverContainer"),a.preventDefault(),a.stopPropagation()):(b=$(this).data("eqObject"),null!==highlightStartIndex&&b.domObj.value.children(".highlight").length>0&&(c=a.pageX-b.domObj.value.offset().left,d=calculateIndex(c),updateHighlightFormatting(b,d),highlightStartIndex===d?addCursorAtIndex(b,d):removeCursor()))}),$(document).on("mouseenter",".eqEdContainer",function(a){a.preventDefault(),a.stopPropagation(),mouseDown&&(clearHighlighted(),null===highlightStartIndex?onMouseDown(this,a):$(this).trigger("mousemove"))}),$(document).on("mouseleave",".eqEdContainer",function(a){a.preventDefault(),a.stopPropagation()}),insertWrapper=function(a){var d,e,f,g,h,i,j,b=$(".cursor"),c=$(".highlighted");if(b.length>0)d=b.parent().data("eqObject"),b.parent().hasClass("squareEmptyContainer")&&(d=d.parent.parent),d.addWrappers([highlightStartIndex,a]),a.updateAll(),removeCursor(),a.childContainers.length>0?a.childContainers[0].wrappers[0]instanceof eqEd.EmptyContainerWrapper?(addCursorAtIndex(a.childContainers[0].wrappers[0].childContainers[0],0),d=a.childContainers[0].wrappers[0].childContainers[0]):addCursorAtIndex(a.childContainers[0],a.childContainers[0].wrappers.length):addCursorAtIndex(d,++highlightStartIndex);else if(c.length>0)if(d=c.parent().data("eqObject"),e=highlightEndIndex>highlightStartIndex?_.range(highlightStartIndex,highlightEndIndex):_.range(highlightEndIndex,highlightStartIndex),a.childContainers.length>0){for(d.addWrappers([e[0],a]),removeCursor(),removeHighlight(),f=[],g=0;g<e.length;g++)h=e[g]+1,i=d.wrappers[h],j=i.clone(),f.push([g,j]);eqEd.Container.prototype.removeWrappers.apply(d,_.map(e,function(a){return a+1})),eqEd.Container.prototype.addWrappers.apply(a.childContainers[0],f),d.updateAll(),addCursorAtIndex(a.childContainers[0],f.length)}else eqEd.Container.prototype.removeWrappers.apply(d,e),d.updateAll(),highlightStartIndex=highlightEndIndex>highlightStartIndex?highlightStartIndex:highlightEndIndex,updateHighlightFormatting(d,highlightStartIndex),addCursorAtIndex(d,highlightStartIndex),insertWrapper(a)},setupKeyboardEvents=function(){var a=["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],b=["1","2","3","4","5","6","7","8","9","0","!","$","%","."],c=["*","-","=","+","/","<",">"],d={"-":"−","/":"÷","*":"⋅","=":"=","+":"+","<":"<",">":">"},e=["(",")","[","]","{","}","|"],f={"(":"leftParenthesisBracket",")":"rightParenthesisBracket","[":"leftSquareBracket","]":"rightSquareBracket","{":"leftCurlyBracket","}":"rightCurlyBracket","|":null};$(document).on("keypress",function(g){var h,i,j,k,l,m,n;return $(".cursor").length>0||$(".highlight").length>0?(h=null,h=$(".cursor").length>0?$(".cursor").parent().data("eqObject").equation:$(".highlight").parent().data("eqObject").equation,i=String.fromCharCode(g.which),$.inArray(i,a)>-1?(j=new eqEd.SymbolWrapper(h,i,"MathJax_MathItalic"),insertWrapper(j),!1):$.inArray(i,b)>-1?(j=new eqEd.SymbolWrapper(h,i,"MathJax_Main"),insertWrapper(j),!1):$.inArray(i,c)>-1?(k=new eqEd.OperatorWrapper(h,d[i],"MathJax_Main"),insertWrapper(k),!1):$.inArray(i,e)>-1?(l=new eqEd.BracketWrapper(h,f[i]),insertWrapper(l),!1):"\\"===i?(k=new eqEd.OperatorWrapper(h,"∖","MathJax_Main"),insertWrapper(k),!1):":"===i?(k=new eqEd.OperatorWrapper(h,":","MathJax_Main"),insertWrapper(k),!1):"'"===i?(k=new eqEd.OperatorWrapper(h,"'","MathJax_MathItalic"),insertWrapper(k),!1):"^"===i?(m=new eqEd.SuperscriptWrapper(h),insertWrapper(m),!1):"_"===i?(n=new eqEd.SubscriptWrapper(h),insertWrapper(n),!1):"_"===i?(n=new eqEd.SubscriptWrapper(h),insertWrapper(n),!1):void 0):void 0}),$(document).on("keydown",function(a){var e,f,g,b=$(".cursor"),c=$(".highlighted"),d=null;if("undefined"!=typeof b&&null!==b&&b.length>0||"undefined"!=typeof c&&null!==c&&c.length>0){if(8===a.which)return b.length>0?(d=b.parent().data("eqObject"),d.parent instanceof eqEd.EmptyContainerWrapper||0!==highlightStartIndex&&null!==highlightStartIndex&&(d.wrappers[highlightStartIndex-1].childContainers.length>0?(d.wrappers[highlightStartIndex-1].domObj.value.addClass("highlighted"),e=highlightStartIndex,highlightStartIndex-=1,updateHighlightFormatting(d,e),removeCursor()):(highlightStartIndex-=1,d.removeWrappers(highlightStartIndex),d.updateAll(),addCursorAtIndex(d,highlightStartIndex)))):c.length>0&&(d=c.parent().data("eqObject"),d.parent instanceof eqEd.EmptyContainerWrapper||(f=highlightEndIndex>highlightStartIndex?_.range(highlightStartIndex,highlightEndIndex):_.range(highlightEndIndex,highlightStartIndex),eqEd.Container.prototype.removeWrappers.apply(d,f),d.updateAll(),highlightStartIndex=highlightEndIndex>highlightStartIndex?highlightStartIndex:highlightEndIndex,updateHighlightFormatting(d,highlightStartIndex),addCursorAtIndex(d,highlightStartIndex))),null!==d&&0===d.wrappers.length&&(d.parent instanceof eqEd.Equation?(d.addWrappers([0,new eqEd.TopLevelEmptyContainerWrapper(d.equation)]),d.updateAll(),addCursorAtIndex(d,0)):(d.addWrappers([0,new eqEd.SquareEmptyContainerWrapper(d.equation)]),d.updateAll(),addCursorAtIndex(d.wrappers[0].childContainers[0],0))),!1;if(46===a.which)return b.length>0?(d=b.parent().data("eqObject"),d.parent instanceof eqEd.EmptyContainerWrapper||highlightStartIndex!==d.wrappers.length&&null!==highlightStartIndex&&(d.wrappers[highlightStartIndex].childContainers.length>0?(d.wrappers[highlightStartIndex].domObj.value.addClass("highlighted"),e=highlightStartIndex+1,updateHighlightFormatting(d,e),removeCursor()):(d.removeWrappers(highlightStartIndex),d.updateAll(),addCursorAtIndex(d,highlightStartIndex)))):c.length>0&&(d=c.parent().data("eqObject"),d.parent instanceof eqEd.EmptyContainerWrapper||(f=highlightEndIndex>highlightStartIndex?_.range(highlightStartIndex,highlightEndIndex):_.range(highlightEndIndex,highlightStartIndex),eqEd.Container.prototype.removeWrappers.apply(d,f),d.updateAll(),highlightStartIndex=highlightEndIndex>highlightStartIndex?highlightStartIndex:highlightEndIndex,updateHighlightFormatting(d,highlightStartIndex),addCursorAtIndex(d,highlightStartIndex))),null!==d&&0===d.wrappers.length&&(d.parent instanceof eqEd.Equation?(d.addWrappers([0,new eqEd.TopLevelEmptyContainerWrapper(d.equation)]),d.updateAll(),addCursorAtIndex(d,0)):(d.addWrappers([0,new eqEd.SquareEmptyContainerWrapper(d.equation)]),d.updateAll(),addCursorAtIndex(d.wrappers[0].childContainers[0],0))),!1;if(37===a.which){if(b.length>0){if(d=b.parent().data("eqObject"),d.wrappers[0]instanceof eqEd.TopLevelEmptyContainerWrapper)return!1;0===highlightStartIndex||d instanceof eqEd.SquareEmptyContainer?(d instanceof eqEd.SquareEmptyContainer&&(d=d.parent.parent),d.domObj.value.prev(".eqEdContainer").length>0?(d=d.domObj.value.prev(".eqEdContainer").first().data("eqObject"),d.wrappers[0]instanceof eqEd.SquareEmptyContainerWrapper&&(d=d.wrappers[0].childContainers[0]),addCursorAtIndex(d,d.wrappers.length)):d.parent instanceof eqEd.Equation||addCursorAtIndex(d.parent.parent,d.parent.index)):d.wrappers[highlightStartIndex-1].childContainers.length>0?d.wrappers[highlightStartIndex-1].childContainers[d.wrappers[highlightStartIndex-1].childContainers.length-1].wrappers[0]instanceof eqEd.EmptyContainerWrapper?addCursorAtIndex(d.wrappers[highlightStartIndex-1].childContainers[d.wrappers[highlightStartIndex-1].childContainers.length-1].wrappers[0].childContainers[0],0):addCursorAtIndex(d.wrappers[highlightStartIndex-1].childContainers[d.wrappers[highlightStartIndex-1].childContainers.length-1],d.wrappers[highlightStartIndex-1].childContainers[d.wrappers[highlightStartIndex-1].childContainers.length-1].wrappers.length):addCursorAtIndex(d,highlightStartIndex-1)}else c.length>0&&(d=c.parent().data("eqObject"),g=highlightEndIndex>highlightStartIndex?highlightStartIndex:highlightEndIndex,addCursorAtIndex(d,g),updateHighlightFormatting(d,g),$(".highlighted").removeClass("highlighted"));return!1}if(39===a.which){if(b.length>0){if(d=b.parent().data("eqObject"),d.wrappers[0]instanceof eqEd.TopLevelEmptyContainerWrapper)return!1;highlightStartIndex===d.wrappers.length||d instanceof eqEd.SquareEmptyContainer?(d instanceof eqEd.SquareEmptyContainer&&(d=d.parent.parent),d.domObj.value.next(".eqEdContainer").length>0?(d=d.domObj.value.next(".eqEdContainer").first().data("eqObject"),d.wrappers[0]instanceof eqEd.SquareEmptyContainerWrapper&&(d=d.wrappers[0].childContainers[0]),addCursorAtIndex(d,0)):d.parent instanceof eqEd.Equation||addCursorAtIndex(d.parent.parent,d.parent.index+1)):d.wrappers[highlightStartIndex].childContainers.length>0?d.wrappers[highlightStartIndex].childContainers[0].wrappers[0]instanceof eqEd.EmptyContainerWrapper?addCursorAtIndex(d.wrappers[highlightStartIndex].childContainers[0].wrappers[0].childContainers[0],0):addCursorAtIndex(d.wrappers[highlightStartIndex].childContainers[0],0):addCursorAtIndex(d,highlightStartIndex+1)}else c.length>0&&(d=c.parent().data("eqObject"),g=highlightStartIndex>highlightEndIndex?highlightStartIndex:highlightEndIndex,addCursorAtIndex(d,g),updateHighlightFormatting(d,g),$(".highlighted").removeClass("highlighted"));return!1}}else;})},setupMenuEvents=function(){var a=function(){var a=null;return $(".cursor").length>0?a=$(".cursor").parent().data("eqObject").equation:$(".highlight").length>0&&(a=$(".highlight").parent().data("eqObject").equation),a};$(document).on("touchstart mousedown","#stackedFractionButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.StackedFractionWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#superscriptButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SuperscriptWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#subscriptButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SubscriptWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#superscriptAndSubscriptButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SuperscriptAndSubscriptWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#squareRootButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SquareRootWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#nthRootButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.NthRootWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#leftAngleBracketButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketWrapper(c,"leftAngleBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#rightAngleBracketButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketWrapper(c,"rightAngleBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#leftFloorBracketButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketWrapper(c,"leftFloorBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#rightFloorBracketButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketWrapper(c,"rightFloorBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#leftCeilBracketButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketWrapper(c,"leftCeilBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#rightCeilBracketButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketWrapper(c,"rightCeilBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#parenthesesBracketPairButton",function(b){var c,d;
b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"parenthesisBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#squareBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"squareBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#curlyBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"curlyBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#angleBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"angleBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#floorBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"floorBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#ceilBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"ceilBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#absValBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"absValBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#normBracketPairButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BracketPairWrapper(c,"normBracket"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sumBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"sum"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sumBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"sum"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sumBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"sum"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigCapBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"bigCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigCapBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"bigCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigCapBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"bigCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigCupBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"bigCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigCupBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"bigCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigCupBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"bigCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigSqCapBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"bigSqCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigSqCapBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"bigSqCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigSqCapBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"bigSqCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigSqCupBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"bigSqCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigSqCupBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"bigSqCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigSqCupBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"bigSqCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#prodBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"prod"),insertWrapper(d)}),$(document).on("touchstart mousedown","#prodBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"prod"),insertWrapper(d)}),$(document).on("touchstart mousedown","#prodBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"prod"),insertWrapper(d)}),$(document).on("touchstart mousedown","#coProdBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"coProd"),insertWrapper(d)}),$(document).on("touchstart mousedown","#coProdBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"coProd"),insertWrapper(d)}),$(document).on("touchstart mousedown","#coProdBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"coProd"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigVeeBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"bigVee"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigVeeBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"bigVee"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigVeeBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"bigVee"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigWedgeBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!0,!0,"bigWedge"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigWedgeBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!0,"bigWedge"),insertWrapper(d)}),$(document).on("touchstart mousedown","#bigWedgeBigOperatorNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!1,!1,!1,"bigWedge"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineSumBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"sum"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineSumBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"sum"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigCapBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"bigCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigCapBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"bigCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigCupBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"bigCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigCupBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"bigCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigSqCapBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"bigSqCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigSqCapBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"bigSqCap"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigSqCupBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"bigSqCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigSqCupBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"bigSqCup"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineProdBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"prod"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineProdBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"prod"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineCoProdBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"coProd"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineCoProdBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"coProd"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigVeeBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"bigVee"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigVeeBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"bigVee"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigWedgeBigOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!0,!0,"bigWedge"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineBigWedgeBigOperatorNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.BigOperatorWrapper(c,!0,!1,!0,"bigWedge"),insertWrapper(d)}),$(document).on("touchstart mousedown","#integralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!0,!0,"single"),insertWrapper(d)}),$(document).on("touchstart mousedown","#integralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!0,"single"),insertWrapper(d)}),$(document).on("touchstart mousedown","#integralNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!1,"single"),insertWrapper(d)}),$(document).on("touchstart mousedown","#doubleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!0,!0,"double"),insertWrapper(d)}),$(document).on("touchstart mousedown","#doubleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!0,"double"),insertWrapper(d)}),$(document).on("touchstart mousedown","#doubleIntegralNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!1,"double"),insertWrapper(d)}),$(document).on("touchstart mousedown","#tripleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!0,!0,"triple"),insertWrapper(d)}),$(document).on("touchstart mousedown","#tripleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!0,"triple"),insertWrapper(d)}),$(document).on("touchstart mousedown","#tripleIntegralNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!1,"triple"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!0,!0,"singleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!0,"singleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourIntegralNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!1,"singleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourDoubleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!0,!0,"doubleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourDoubleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!0,"doubleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourDoubleIntegralNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!1,"doubleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourTripleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!0,!0,"tripleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourTripleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!0,"tripleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#contourTripleIntegralNoUpperNoLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!1,!1,!1,"tripleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!0,!0,"single"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!1,!0,"single"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineDoubleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!0,!0,"double"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineDoubleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!1,!0,"double"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineTripleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!0,!0,"triple"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineTripleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!1,!0,"triple"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineContourIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!0,!0,"singleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineContourIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!1,!0,"singleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineContourDoubleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!0,!0,"doubleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineContourDoubleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!1,!0,"doubleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineContourTripleIntegralButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!0,!0,"tripleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#inlineContourTripleIntegralNoUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.IntegralWrapper(c,!0,!1,!0,"tripleContour"),insertWrapper(d)}),$(document).on("touchstart mousedown","#partialDifferentialButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"∂","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#logButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"log","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#lnButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"ln","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#limButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"lim","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#maxButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"max","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#minButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"min","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#supButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"sup","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#infButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"inf","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sinButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"sin","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#cosButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"cos","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#tanButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"tan","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#cotButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"cot","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#secButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"sec","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#cscButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"csc","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sinhButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"sinh","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#coshButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"cosh","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#tanhButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"tanh","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#cothButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"coth","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sechButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"sech","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#cschButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionWrapper(c,"csch","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#limitButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.LimitWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#maxLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionLowerWrapper(c,"max","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#minLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.FunctionLowerWrapper(c,"min","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#logLowerButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.LogLowerWrapper(c),insertWrapper(d)}),$(document).on("touchstart mousedown","#matrixButton",function(b){var c,d,e,f;b.preventDefault(),b.stopPropagation(),c=a(),$("#rows").blur(),$("#cols").blur(),d=parseInt($("#rows").val()),e=parseInt($("#cols").val()),f=new eqEd.MatrixWrapper(c,d,e,"center"),insertWrapper(f)}),$(document).on("touchstart mousedown","#dotAccentButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.AccentWrapper(c,"˙","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#hatAccentButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.AccentWrapper(c,"^","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#vectorAccentButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.AccentWrapper(c,"⃗","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#barAccentButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.AccentWrapper(c,"¯","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#gammaUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Γ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#deltaUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Δ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#thetaUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Θ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#lambdaUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Λ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#xiUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Ξ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#piUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Π","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sigmaUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Σ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#upsilonUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Υ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#phiUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Φ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#psiUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Ψ","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#omegaUpperButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"Ω","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#alphaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"α","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#betaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"β","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#gammaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"γ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#deltaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"δ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#varEpsilonButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ε","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#epsilonButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ϵ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#zetaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ζ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#etaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"η","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#thetaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"θ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#varThetaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ϑ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#iotaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ι","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#kappaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"κ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#lambdaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"λ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#muButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"μ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#nuButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ν","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#xiButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ξ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#piButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"π","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#varPiButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ϖ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#rhoButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ρ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#varRhoButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ϱ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#sigmaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"σ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#varSigmaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ς","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#tauButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"τ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#upsilonButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"υ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#varPhiButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"φ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#phiButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ϕ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#chiButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"χ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#psiButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ψ","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#omegaButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"ω","MathJax_MathItalic"),insertWrapper(d)}),$(document).on("touchstart mousedown","#lessThanOrEqualToButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≤","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#greaterThanOrEqualToButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≥","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#circleOperatorButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"◦","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#approxEqualToButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≈","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#belongsToButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∈","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#timesButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"×","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#pmButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"±","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#wedgeButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∧","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#veeButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∨","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#equivButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≡","MathJax_Main"),insertWrapper(d)
}),$(document).on("touchstart mousedown","#congButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≅","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#neqButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≠","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#simButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∼","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#proptoButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∝","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#precButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≺","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#precEqButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"⪯","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#subsetButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"⊂","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#subsetEqButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"⊆","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#succButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"≻","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#succEqButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"⪰","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#perpButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"⊥","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#midButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∣","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#parallelButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,"∥","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#colonButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.OperatorWrapper(c,":","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#partialButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"∂","MathJax_Main"),insertWrapper(d)}),$(document).on("touchstart mousedown","#infinityButton",function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a(),d=new eqEd.SymbolWrapper(c,"∞","MathJax_Main"),insertWrapper(d)})},$(document).on("click",".tabs .tab-links a",function(a){var b=$(this).attr("href");$(".tabs "+b).show().siblings().hide(),$(this).parent("li").addClass("active").siblings().removeClass("active"),a.preventDefault()}),fontsLoaded=!1,spinner=null,setup=function(){if(fontsLoaded){spinner&&spinner.stop(),$("#loadingMessage").remove(),$("#loadingMessageOuter").remove(),initializePropertyHooks(),setupKeyboardEvents(),setupMenuEvents();var a=new eqEd.Equation;$(".equation-editor").replaceWith(a.domObj.value),a.updateAll(),on_editor_loaded()}},loadFonts=function(a){WebFont.load({custom:{families:["MathJax_Main:n4,i4","MathJax_Math:i4","MathJax_Size1:n4","MathJax_Size2:n4","MathJax_Size3:n4","MathJax_Size4:n4","MathJax_AMS:n4"],testStrings:{"MathJax_Size2:n4":"∑⋂⨀∏⋃⨂∐⨆⨁∫⋁⨄"},urls:["static/equationeditor/css/font.css"]},active:function(){fontsLoaded=!0,a()},inactive:function(){console.log("Failed to load fonts.")}})},loadFonts(setup),generateLatex=function(a){var c,d,e,f,g,h,i,j,k,l,b="";for(c=0;c<a.length;c++)switch(d=a[c],d.type){case"Symbol":b+=symbolToLatex(d);break;case"BigOperator":b+=bigOperatorToLatex(d);break;case"Function":b+=functionToLatex(d);break;case"Bracket":b+=bracketToLatex(d);break;case"Operator":b+=operatorToLatex(d);break;case"BracketPair":b+=bracketPairToLatex(d);break;case"Integral":b+=integralToLatex(d);break;case"Accent":b+=accentToLatex(d);break;case"FunctionLower":b+=functionLowerToLatex(d);break;case"Limit":b+=limitToLatex(d);break;case"LogLower":b+=logLowerToLatex(d);break;case"Matrix":b+=matrixToLatex(d);break;case"NthRoot":b+=nthRootToLatex(d);break;case"SquareRoot":b+=squareRootToLatex(d);break;case"StackedFraction":b+=stackedFractionToLatex(d);break;case"Superscript":for(b+=superscriptToLatex(d),e="";"undefined"!=typeof a[c+1]&&"Superscript"===a[c+1].type;)c++,b=b.substring(0,b.length-1),e+="}",b+=superscriptToLatex(a[c]);b+=e;break;case"Subscript":for(b+=subscriptToLatex(d),e="";"undefined"!=typeof a[c+1]&&"Subscript"===a[c+1].type;)c++,b=b.substring(0,b.length-1),e+="}",b+=subscriptToLatex(a[c]);b+=e;break;case"SuperscriptAndSubscript":for(f=[],g=[],f.push(d.operands.superscript),g.push(d.operands.subscript);"undefined"!=typeof a[c+1]&&"SuperscriptAndSubscript"===a[c+1].type;)c++,f.push(a[c].operands.superscript),g.push(a[c].operands.subscript);for(;"undefined"!=typeof a[c+1]&&"Superscript"===a[c+1].type;)c++,f.push(a[c].operands.superscript);for(;"undefined"!=typeof a[c+1]&&"Subscript"===a[c+1].type;)c++,g.push(a[c].operands.subscript);for(h="",i="",j=0;j<f.length;j++)h+="^{"+generateLatex(f[j]),i+="}";for(h+=i,k="",l="",j=0;j<g.length;j++)k+="_{"+generateLatex(g[j]),l+="}";k+=l,b+=h+k}return b},symbolToLatex=function(a){var b="",c={"∂":"\\partial","∞":"\\infty","Γ":"\\Gamma","Δ":"\\Delta","Θ":"\\Theta","Λ":"\\Lambda","Ξ":"\\Xi","Π":"\\Pi","Σ":"\\Sigma","Υ":"\\Upsilon","Φ":"\\Phi","Ψ":"\\Psi","Ω":"\\Omega","α":"\\alpha","β":"\\beta","γ":"\\gamma","δ":"\\delta","ε":"\\varepsilon","ϵ":"\\epsilon","ζ":"\\zeta","η":"\\eta","θ":"\\theta","ϑ":"\\vartheta","ι":"\\iota","κ":"\\kappa","λ":"\\lambda","μ":"\\mu","ν":"\\nu","ξ":"\\xi","π":"\\pi","ϖ":"\\varpi","ρ":"\\rho","ϱ":"\\varrho","σ":"\\sigma","ς":"\\varsigma","τ":"\\tau","υ":"\\upsilon","φ":"\\varphi","ϕ":"\\phi","χ":"\\chi","ψ":"\\psi","ω":"\\omega","ı":"\\imath","ȷ":"\\jmath"};return b="undefined"==typeof c[a.value]?a.value:c[a.value]},bigOperatorToLatex=function(a){var f,b="",c="",d="",e="";return"undefined"!=typeof a.operands.lowerLimit&&(c="_{"+generateLatex(a.operands.lowerLimit)+"}"),"undefined"!=typeof a.operands.upperLimit&&(d="^{"+generateLatex(a.operands.upperLimit)+"}"),e=generateLatex(a.operands.operand),f={sum:"\\sum",bigCap:"\\bigcap",bigCup:"\\bigcup",bigSqCap:"\\sqcap",bigSqCup:"\\bigsqcup",prod:"\\prod",coProd:"\\coprod",bigVee:"\\bigvee",bigWedge:"\\bigwedge"},b=f[a.value]+c+d+e},functionToLatex=function(a){var b="";return b="\\"+a.value},bracketToLatex=function(a){var b="",c={leftParenthesisBracket:"\\left(",rightParenthesisBracket:"\\right)",leftSquareBracket:"\\left[",rightSquareBracket:"\\right]",leftCurlyBracket:"\\left\\{",rightCurlyBracket:"\\right\\}",leftAngleBracket:"\\left\\langle",rightAngleBracket:"\\right\\rangle",leftFloorBracket:"\\left\\lfloor",rightFloorBracket:"\\right\\rfloor",leftCeilBracket:"\\left\\lceil",rightCeilBracket:"\\right\\rceil"};return b=c[a.value]},operatorToLatex=function(a){var b="",c={"+":"+","−":"-","=":"=","<":"<",">":">","≤":"\\leq","≥":"\\geq","≈":"\\approx","≡":"\\equiv","≅":"\\cong","≠":"\\neq","∼":"\\sim","∝":"\\propto","≺":"\\prec","⪯":"\\preceq","⊂":"\\subset","⊆":"\\subseteq","≻":"\\succ","⪰":"\\succeq","◦":"\\circ","∈":"\\in","×":"\\times","±":"\\pm","∧":"\\wedge","∨":"\\vee","⊥":"\\perp","∣":"\\mid","∥":"\\parallel",":":":","÷":"\\div","⋅":"\\cdot","=":"="};return b=c[a.value]},bracketPairToLatex=function(a){var b="",c=generateLatex(a.operands.bracketedExpression),d={parenthesisBracket:"\\left("+c+"\\right)",squareBracket:"\\left["+c+"\\right]",curlyBracket:"\\left\\{"+c+"\\right\\}",angleBracket:"\\left\\langle"+c+"\\right\\rangle",floorBracket:"\\left\\lfloor"+c+"\\right\\rfloor",ceilBracket:"\\left\\lceil"+c+"\\right\\rceil",absValBracket:"\\left|"+c+"\\right|",normBracket:"\\left\\|"+c+"\\right\\|"};return b=d[a.value]},integralToLatex=function(a){var e,b="",c="",d="";return"undefined"!=typeof a.operands.lowerLimit&&(c="_{"+generateLatex(a.operands.lowerLimit)+"}"),"undefined"!=typeof a.operands.upperLimit&&(d="^{"+generateLatex(a.operands.upperLimit)+"}"),e={single:"\\int","double":"\\iint",triple:"\\iiint",singleContour:"\\oint",doubleContour:"\\oiint",tripleContour:"\\oiiint"},b=e[a.value]+c+d},accentToLatex=function(a){var b="",c="{"+generateLatex(a.operands.accentedExpression)+"}",d={"˙":"\\dot","^":"\\hat","⃗":"\\vec","¯":"\\bar"};return b=d[a.value]+c},functionLowerToLatex=function(a){var b="",c="_{"+generateLatex(a.operands.lower)+"}";return b="\\"+a.value+c},limitToLatex=function(a){var b="\\lim",c="_{"+generateLatex(a.operands.left)+" \\to "+generateLatex(a.operands.right)+"}";return b+=c},logLowerToLatex=function(a){var b="\\log",c="_{"+generateLatex(a.operands.lower)+"}";return b+=c},matrixToLatex=function(a){var c,d,e,f,b="\\begin{array}{ccc}";for(c=0;c<a.operands.elements.length;c++){for(d=a.operands.elements[c],e="",f=0;f<d.length;f++)e+=generateLatex(d[f])+" & ";e=e.substring(0,e.length-2)+"\\\\\r\n",b+=e}return b+="\\end{array}"},nthRootToLatex=function(a){var b="\\sqrt",c="["+generateLatex(a.operands.degree)+"]",d="{"+generateLatex(a.operands.radicand)+"}";return b+=c+d},squareRootToLatex=function(a){var b="\\sqrt",c="{"+generateLatex(a.operands.radicand)+"}";return b+=c},stackedFractionToLatex=function(a){var b="\\frac",c="{"+generateLatex(a.operands.numerator)+"}",d="{"+generateLatex(a.operands.denominator)+"}";return b+=c+d},subscriptToLatex=function(a){var b="",c="_{"+generateLatex(a.operands.subscript)+"}";return b+=c},superscriptToLatex=function(a){var b="",c="^{"+generateLatex(a.operands.superscript)+"}";return b+=c};